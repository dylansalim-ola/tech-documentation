<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>AgileKit</title>
    <link href="/tech-documentation/2023/03/09/agilekit/agilekit_intro_usage/"/>
    <url>/tech-documentation/2023/03/09/agilekit/agilekit_intro_usage/</url>
    
    <content type="html"><![CDATA[<blockquote><p>AgileKit Docs and usage，Ticket: <a href="https://github.com/olachat/agilekit">https://github.com/olachat/agilekit</a></p></blockquote><span id="more"></span><h1 id="agilekit"><a href="#agilekit" class="headerlink" title="agilekit"></a>agilekit</h1><p>Go project to organize and process github issues.</p><h2 id="Prerequisite"><a href="#Prerequisite" class="headerlink" title="Prerequisite"></a>Prerequisite</h2><ul><li>go version 1.19</li></ul><h2 id="To-generate-CSV-file"><a href="#To-generate-CSV-file" class="headerlink" title="To generate CSV file"></a>To generate CSV file</h2><ol><li>Update the conf.toml<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml">[<span class="hljs-string">app</span>]<br><span class="hljs-string">port=5555</span><br><span class="hljs-string">GithubToken=&quot;YOUR_GITHUB_TOKEN&quot;</span><br><span class="hljs-string">OrgName=&quot;olachat&quot;</span><br><span class="hljs-string">ProjectNumber=12380446</span><br><span class="hljs-string">TeamName=&quot;veeka&quot;</span><br><span class="hljs-string">GithubAPIUrl=&quot;https://api.github.com/&quot;</span><br></code></pre></td></tr></table></figure></li><li>Generate CSV Files<br>a. Generate for all sprints<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make Makefile -C /Users/ola_friend/Documents/REPO/agilekit okr-all <br></code></pre></td></tr></table></figure></li></ol><p>b. Generate for current sprint only</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make Makefile -C /Users/ola_friend/Documents/REPO/agilekit okr-current <br></code></pre></td></tr></table></figure><h2 id="To-Archive-old-issues"><a href="#To-Archive-old-issues" class="headerlink" title="To Archive old issues"></a>To Archive old issues</h2><ol><li><p>Dry run to view the closable issues available</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make Makefile -C /Users/ola_friend/Documents/REPO/agilekit archive <br></code></pre></td></tr></table></figure></li><li><p>Execute close command to all closable issues <br>(WARNING: Run this cmd only when you know what you are doing)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make Makefile -C /Users/ola_friend/Documents/REPO/agilekit archive-exec<br></code></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    <categories>
      
      <category>agilekit</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AgileKit</tag>
      
      <tag>Github Project</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>最佳情侣pk赛活动</title>
    <link href="/tech-documentation/2023/03/08/h5_%E6%B4%BB%E5%8A%A8/H5_CP_PK_event/"/>
    <url>/tech-documentation/2023/03/08/h5_%E6%B4%BB%E5%8A%A8/H5_CP_PK_event/</url>
    
    <content type="html"><![CDATA[<blockquote><p>最佳情侣pk赛活动接口文档，Ticket: <a href="https://github.com/olachat/veeka/issues/6199">https://github.com/olachat/veeka/issues/6199</a></p></blockquote><span id="more"></span><h2 id="最佳情侣pk赛活动"><a href="#最佳情侣pk赛活动" class="headerlink" title="最佳情侣pk赛活动"></a>最佳情侣pk赛活动</h2><h3 id="1-Main-API"><a href="#1-Main-API" class="headerlink" title="1. Main API"></a>1. Main API</h3><p>Desc: Main API before tab</p><p>URL: &#x2F;activity&#x2F;best_cp_pk_event&#x2F;main</p><p>Sample Response:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;event_period&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2023.1.21-2023.1.25&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;my_cp_content&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;left_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110298</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;boy&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;right_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110299</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;girl&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;cp_vote_accumulated&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">52000</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;is_cp_available&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span> <span class="hljs-comment">// 1 for available, 0 for not-available (display find cp btn)</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;prize_list&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;prize_type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;gift&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;钱兔似锦&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;desc&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;100金豆&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;gift&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;gift_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/.png&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;reward_category_list&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;category_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;category_name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;TOP1&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;reward_list&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-punctuation">&#123;</span><br>          <span class="hljs-attr">&quot;prize_type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;gift&quot;</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;钱兔似锦&quot;</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;desc&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;100金豆&quot;</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;gift&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;gift_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/.png&quot;</span><br>          <span class="hljs-punctuation">&#125;</span><br>        <span class="hljs-punctuation">&#125;</span><br>      <span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;category_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;category_name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;TOP2&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;reward_list&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-punctuation">&#123;</span><br>          <span class="hljs-attr">&quot;prize_type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;gift&quot;</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;钱兔似锦&quot;</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;desc&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;100金豆&quot;</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;gift&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;badge&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;10天&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;gift_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/.png&quot;</span><br>          <span class="hljs-punctuation">&#125;</span><br>        <span class="hljs-punctuation">&#125;</span><br>      <span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="2-CP-Voting-amp-Prize-Box-Tab"><a href="#2-CP-Voting-amp-Prize-Box-Tab" class="headerlink" title="2. CP Voting &amp; Prize Box Tab"></a>2. CP Voting &amp; Prize Box Tab</h3><p>Desc: CP Voting Tab content</p><p>URL: &#x2F;activity&#x2F;best_cp_pk_event&#x2F;GetCPVotingTab</p><p>5 votes per day, recharge once get another voting chance</p><p>Sample Response:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;vote_remaining&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">//if vote left is 0, then the user is not allowed to vote</span><br>  <span class="hljs-attr">&quot;can_open_box&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// if user can open the box</span><br>  <span class="hljs-attr">&quot;reward_list&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;prize_type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;gift&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;钱兔似锦&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;desc&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;100金豆&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;gift&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;badge&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;10天&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;gift_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/.png&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="3-Best-CP-Billboard-Tab"><a href="#3-Best-CP-Billboard-Tab" class="headerlink" title="3. Best CP Billboard Tab"></a>3. Best CP Billboard Tab</h3><p>Desc: Billboard tab content</p><p>URL: &#x2F;activity&#x2F;best_cp_pk_event&#x2F;GetBestCPBillboardTab</p><p>Sample Response:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;not_rank_tips&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-comment">// if there isn&#x27;t any user in the rank return this, this will only display if the user rank list is empty, len(user_rank_list) == 0</span><br>    <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;活动还没开始&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;sub_title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;活动将在-月-日至-月-日&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;user_rank_list&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-comment">// if there is any user in the rank return the list of items, if not, return empty array, do not return null</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;rank_idx&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;left_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110298</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;boy&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;right_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110299</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;girl&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;cp_vote_accumulated&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">52000</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;my_rank&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;rank_idx&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;left_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110298</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;boy&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;right_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110299</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;girl&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;cp_vote_accumulated&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">52000</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;is_cp_available&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span> <span class="hljs-comment">// 1 for available, 0 for not-available (display find cp btn)</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="4-Love-Letter-Tab"><a href="#4-Love-Letter-Tab" class="headerlink" title="4. Love Letter Tab"></a>4. Love Letter Tab</h3><p>Desc: For display love letter content</p><p>URL: &#x2F;activity&#x2F;best_cp_pk_event&#x2F;GetLoveLetterBillboardTab</p><p>Contain sent love letter by the user, disappear after 24 hours</p><ul><li>Normal Love Letter limits at 20 words</li><li>Premium Love Letter limits at 40 words<br><br>Sample Request:</li></ul><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;can_send_normal_letter&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// if the normal letter have send limit</span><br>  <span class="hljs-attr">&quot;can_send_premium_letter&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// if the premium letter have send limit</span><br>  <span class="hljs-attr">&quot;not_rank_tips&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-comment">// if there isn&#x27;t any user in the rank return this, this will only display if the user rank list is empty, len(user_rank_list) == 0</span><br>    <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;暂时还没有情书&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;sub_title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;快去填写情书吧！&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;user_rank_list&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-comment">// if there is any user in the rank return the list of items, if not, return empty array, do not return null</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;rank_idx&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;left_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110298</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;boy&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;right_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110299</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;girl&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;cp_vote_accumulated&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">52000</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;letter_content&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;꧅你好(ؓؒؒؑؑؖؔؓؒؐؐ⁼̴̀ωؘؙؖؕؔؓؒؑؐؕ⁼̴̀ )꧅(ؓؒؒؑؑؖؔؓؒؐؐ⁼̴̀ωؘؙؖؕؔؓؒؑؐؕ⁼̴̀ )꧅(ؓؒؒؑؑؖؔؓؒؐؐ⁼̴̀ωؘؙؖؕؔؓؒؑؐؕ⁼̴̀ )꧅꧅&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;letter_date&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2023年7月10日&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;letter_time&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;12:02&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="5-Display-Voting-CP-List"><a href="#5-Display-Voting-CP-List" class="headerlink" title="5. Display Voting CP List"></a>5. Display Voting CP List</h3><p>Desc: For display Voting CP List</p><p>URL: &#x2F;activity&#x2F;best_cp_pk_event&#x2F;GetInitialVotingCPList</p><p>Return 50 entries of Voting CP List<br>Sample Request:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;error_message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;你已经投票五次了&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// default: &quot;&quot;</span><br>  <span class="hljs-attr">&quot;cp_list_to_vote&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;cp_vote_idx&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;left_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110298</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;boy&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;right_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110299</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;girl&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;can_vote&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span> <span class="hljs-comment">// 1 for can vote, 0 for cannot</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="6-Search-Related-Voting-CP-List"><a href="#6-Search-Related-Voting-CP-List" class="headerlink" title="6. Search Related Voting CP List"></a>6. Search Related Voting CP List</h3><p>Desc: Search request for Related Voting CP List, by uid and name</p><p>URL: &#x2F;activity&#x2F;best_cp_pk_event&#x2F;SearchCPList</p><p>This api only call if user searched</p><p>Sample Request</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;search_text&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;112&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>Sample Response:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;msg&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;没有资料&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;cp_list_to_vote&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;cp_vote_idx&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;left_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110298</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;boy&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;right_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110299</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;girl&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;can_vote&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span> <span class="hljs-comment">// 1 for can vote, 0 for cannot</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="7-Vote-for-CP"><a href="#7-Vote-for-CP" class="headerlink" title="7. Vote for CP"></a>7. Vote for CP</h3><p>Sample Request</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;cp_vote_idx&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>Sample Response:<br>return success: true by default</p><h3 id="8-Send-Love-Letter"><a href="#8-Send-Love-Letter" class="headerlink" title="8. Send Love Letter"></a>8. Send Love Letter</h3><p>Disclaimer: The get friend list api was skip if the UI for friend selection to send love letter can be done via mobile<br>&amp; if the letter can send to the same user multiple times</p><p>Desc: API for sending love letter</p><p>URL: &#x2F;activity&#x2F;cp_valentine_event&#x2F;SendLoveLetter</p><p>Sample Request</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;cp_vote_idx&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>Sample Response:<br>return success: true by default</p><h3 id="9-Send-Normal-Love-Letter"><a href="#9-Send-Normal-Love-Letter" class="headerlink" title="9. Send Normal Love Letter"></a>9. Send Normal Love Letter</h3><h3 id="10-Send-Premium-Love-Letter"><a href="#10-Send-Premium-Love-Letter" class="headerlink" title="10. Send Premium Love Letter"></a>10. Send Premium Love Letter</h3><p>Disclaimer: The get friend list api was skip if the UI for friend selection to send love letter can be done via mobile<br>&amp; if the letter can send to the same user multiple times</p><p>Desc: API for sending love letter</p><p>URL: &#x2F;activity&#x2F;cp_valentine_event&#x2F;SendNormalLoveLetter<br>URL: &#x2F;activity&#x2F;cp_valentine_event&#x2F;SendPremiumLoveLetter</p><p>Sample Request</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;love_letter_msg&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;꧅你好(ؓؒؒؑؑؖؔؓؒؐؐ⁼̴̀ωؘؙؖؕؔؓؒؑؐؕ⁼̴̀ )꧅(ؓؒؒؑؑؖؔؓؒؐؐ⁼̴̀ωؘؙؖؕؔؓؒؑؐؕ⁼̴̀ )꧅(ؓؒؒؑؑؖؔؓؒؐؐ⁼̴̀ωؘؙؖؕؔؓؒؑؐؕ⁼̴̀ )꧅꧅&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>Sample Response:<br>return success: true by default</p><h3 id="11-Display-Love-letter-inbox"><a href="#11-Display-Love-letter-inbox" class="headerlink" title="11. Display Love letter inbox"></a>11. Display Love letter inbox</h3><p>Desc: For display Love letter inbox, display all inbox</p><p>URL: &#x2F;activity&#x2F;best_cp_pk_event&#x2F;GetLoveLetterInboxList</p><p>Sample Response:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;error_message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">//没有信息不会放在这里</span><br>  <span class="hljs-attr">&quot;cp_list_to_vote&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;cp_vote_idx&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;left_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110298</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;boy&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;right_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110299</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;girl&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;can_vote&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span> <span class="hljs-comment">// 1 for can vote, 0 for cannot</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="12-Display-Task-list"><a href="#12-Display-Task-list" class="headerlink" title="12. Display Task list"></a>12. Display Task list</h3><p>Desc: For display Love letter inbox, display all inbox</p><p>URL: &#x2F;activity&#x2F;best_cp_pk_event&#x2F;GetTaskList</p><p>Sample Response:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;error_message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">//没有信息不会放在这里</span><br>  <span class="hljs-attr">&quot;task_list&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;task_idx&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;任务 1&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;desc&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;情侣签到&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;current_progress_point&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;max_progress_point&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;cp_heart_point&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">30</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;UNCLAIMED&quot;</span> <span class="hljs-comment">//enum of &#123;UNCLAIMED, CLAIMED, UNAVAILABLE&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="13-Claim-Task-list"><a href="#13-Claim-Task-list" class="headerlink" title="13. Claim Task list"></a>13. Claim Task list</h3><p>Desc: For display Love letter inbox, display all inbox</p><p>URL: &#x2F;activity&#x2F;best_cp_pk_event&#x2F;ClaimTaskList</p><p>Sample Request:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;task_idx&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>Sample Response:<br>return success: true by default</p>]]></content>
    
    
    <categories>
      
      <category>h5_活动</category>
      
    </categories>
    
    
    <tags>
      
      <tag>接口文档</tag>
      
      <tag>H5</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Auth failed issue upon login</title>
    <link href="/tech-documentation/2023/03/08/veeka_mobile/login/login/"/>
    <url>/tech-documentation/2023/03/08/veeka_mobile/login/login/</url>
    
    <content type="html"><![CDATA[<blockquote><p>Existing issue with Auth failed when switching dev and prod environment when user is logged in</p></blockquote><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>If user change environment while logged in, and click restart to take effect button in developer options, it will show ‘Auth failed’ error message on the next app start. This happens because of the globalProviders was set on the application.dart level instead on the after login part of the code.</p><ul><li><p>Line 151, application.dart</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">globalProviders</span><span class="hljs-selector-class">.addAll</span>([<br>      <span class="hljs-built_in">ChangeNotifierProvider</span>(<span class="hljs-attribute">create</span>: (_) =&gt; <span class="hljs-built_in">UserModel</span>(), <span class="hljs-attribute">lazy</span>: false),<br>      <span class="hljs-built_in">ChangeNotifierProvider</span>(<span class="hljs-attribute">create</span>: (_) =&gt; <span class="hljs-built_in">MomentModel</span>(), <span class="hljs-attribute">lazy</span>: false),<br>      <span class="hljs-built_in">ChangeNotifierProvider</span>(<span class="hljs-attribute">create</span>: (_) =&gt; <span class="hljs-built_in">ProfilePayload</span>(), <span class="hljs-attribute">lazy</span>: false),<br>      <span class="hljs-built_in">ChangeNotifierProvider</span>(<span class="hljs-attribute">create</span>: (_) =&gt; <span class="hljs-built_in">GiftMediaModel</span>(), <span class="hljs-attribute">lazy</span>: false),<br>      <span class="hljs-built_in">ChangeNotifierProvider</span>(<span class="hljs-attribute">create</span>: (_) =&gt; <span class="hljs-built_in">ThemeProvider</span>(), <span class="hljs-attribute">lazy</span>: false),<br>      <span class="hljs-built_in">ChangeNotifierProvider</span>(<span class="hljs-attribute">create</span>: (_) =&gt; <span class="hljs-built_in">MomentVideoProvider</span>(), <span class="hljs-attribute">lazy</span>: false),<br>      <span class="hljs-built_in">ChangeNotifierProvider</span>(<span class="hljs-attribute">create</span>: (_) =&gt; <span class="hljs-built_in">PersonalInfoProvider</span>(), <span class="hljs-attribute">lazy</span>: false),<br>      <span class="hljs-built_in">ChangeNotifierProvider</span>(<span class="hljs-attribute">create</span>: (_) =&gt; <span class="hljs-built_in">RechargePackageProvider</span>(), <span class="hljs-attribute">lazy</span>: false),<br>      <span class="hljs-built_in">ChangeNotifierProvider</span>(<span class="hljs-attribute">create</span>: (_) =&gt; <span class="hljs-built_in">GiftDecorateProvider</span>(), <span class="hljs-attribute">lazy</span>: false),<br>      <span class="hljs-built_in">ChangeNotifierProvider</span>(<span class="hljs-attribute">create</span>: (_) =&gt; <span class="hljs-built_in">MomentPostGuideProvider</span>(), <span class="hljs-attribute">lazy</span>: false),<br>      if (Constant.isDevMode) <span class="hljs-built_in">ChangeNotifierProvider</span>(<span class="hljs-attribute">create</span>: (_) =&gt; hotupdater, <span class="hljs-attribute">lazy</span>: false),<br>    ]);<br></code></pre></td></tr></table></figure></li><li><p>This part of code will triggered actively and will trigger the api calls to get information such as taskCenterShowRedDot</p></li><li><p>Snippet from ProfilePayload</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-constructor">ProfilePayload()</span> &#123;<br>    eventCenter.add<span class="hljs-constructor">Listener(System.EventLogin, <span class="hljs-params">_onLogin</span>)</span>;<br>    eventCenter.add<span class="hljs-constructor">Listener(&#x27;TaskCenter.<span class="hljs-params">noRedDot</span>&#x27;, <span class="hljs-params">_removeTaskDot</span>)</span>;<br>    eventCenter.add<span class="hljs-constructor">Listener(EventConstant.TaskCenterClaimableChange, <span class="hljs-params">_taskCenterClaimableChange</span>)</span>;<br><br>    reload<span class="hljs-literal">()</span>;<br>    load<span class="hljs-constructor">MomentsInfo()</span>;<br>    load<span class="hljs-constructor">MomentUnreadMsg()</span>;<br>    load<span class="hljs-constructor">VipMallRedPoint()</span>;<br>    load<span class="hljs-constructor">GiftWallPoint()</span>;<br>    load<span class="hljs-constructor">MentorShipRedPoint()</span>;<br>    load<span class="hljs-constructor">PopularityRedPoint()</span>;<br>    load<span class="hljs-constructor">VipRedPoint()</span>;<br>    load<span class="hljs-constructor">GoldBeanRedPoint()</span>;<br>    <span class="hljs-keyword">function</span><span class="hljs-constructor">CenterHasRedDot()</span>;<br>    task<span class="hljs-constructor">CenterShowRedDot()</span>;<br>    load<span class="hljs-constructor">InvitePrizeRedDot()</span>;<br><br>    _momentRedPointTimer =<br>        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Timer</span>.</span></span>periodic(<span class="hljs-constructor">Duration(<span class="hljs-params">seconds</span>: 60)</span>,<span class="hljs-function"> (<span class="hljs-params">timer</span>) =&gt;</span> load<span class="hljs-constructor">MomentsInfo()</span>);<br>    _momentUnReadMsgTimer =<br>        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Timer</span>.</span></span>periodic(<span class="hljs-constructor">Duration(<span class="hljs-params">seconds</span>: 90)</span>,<span class="hljs-function"> (<span class="hljs-params">timer</span>) =&gt;</span> load<span class="hljs-constructor">MomentUnreadMsg()</span>);<br>  &#125;<br></code></pre></td></tr></table></figure></li><li><p>You might think that adding a check on the session.isLogined() might solve the issue, but actually it will not. This part of code will be called upon app startup which is before it checks that the app session is valid or not. Calling the Session here will only get the previous session status, which in turns causing the session.isLogined() to be true.</p></li></ul><h2 id="Possible-fix-for-this-issue"><a href="#Possible-fix-for-this-issue" class="headerlink" title="Possible fix for this issue"></a>Possible fix for this issue</h2><ol><li>Destroy the session upon clicking the ‘重启生效’, but it creates extra steps for developer and QA during testing (Need to relogin if we change environment)</li></ol><h2 id="Why-we-opt-to-not-fixing-this-issue"><a href="#Why-we-opt-to-not-fixing-this-issue" class="headerlink" title="Why we opt to not fixing this issue"></a>Why we opt to not fixing this issue</h2><ol><li>Currently it only affects dev environment and it is not a fatal issue (Online users does not have the rights to switch environment)</li></ol>]]></content>
    
    
    <categories>
      
      <category>veeka_mobile</category>
      
      <category>login</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Authentication</tag>
      
      <tag>Login</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Agora &amp; BBRTC Debug steps</title>
    <link href="/tech-documentation/2023/03/08/veeka_mobile/rtc/rtc/"/>
    <url>/tech-documentation/2023/03/08/veeka_mobile/rtc/rtc/</url>
    
    <content type="html"><![CDATA[<blockquote><p>Steps to debug agora and bbrtc</p></blockquote><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>Agora is a paid service of video, voice and live interactive streaming, whereas bbrtc is developed by ola team.<br>Agora is used in video room whereas bbrtc is used in other room<br>However, due to the network connection issue in some region including Taiwan, Agora is still the default rtc engine to use in Veeka App.</p><h2 id="How-to-determine-if-we-have-agora-x2F-bbrtc-issue"><a href="#How-to-determine-if-we-have-agora-x2F-bbrtc-issue" class="headerlink" title="How to determine if we have agora&#x2F;bbrtc issue"></a>How to determine if we have agora&#x2F;bbrtc issue</h2><p>Check if the following items are having issues:</p><ul><li>Listen music in room</li><li>Video call and see if other can view the video</li></ul><h2 id="Possible-issue"><a href="#Possible-issue" class="headerlink" title="Possible issue"></a>Possible issue</h2><ol><li>Agora&#x2F;BBRTC app id expired issue</li></ol><ul><li>Currently the app id for both rtc engine is set by Veeka mobile app, although there is api and remote config to replace these app id, none of them are used currently. The developer_options.dart should be the only source of truth when it comes to the app id configuration.</li></ul><h2 id="How-to-solve"><a href="#How-to-solve" class="headerlink" title="How to solve"></a>How to solve</h2><ol><li>Change to different environment and check if the issue persist</li><li>If it does not exist on the other environment, it is high likely that the app id is expired, find X教授 if it is related to Agora, bbrtc team if it is related to bbrtc</li></ol>]]></content>
    
    
    <categories>
      
      <category>veeka_mobile</category>
      
      <category>rtc</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Agora</tag>
      
      <tag>BBRTC</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
