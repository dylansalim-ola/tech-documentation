<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>wiki_docs_archive</title>
    <link href="/tech-documentation/post/documentation_implementation/wiki_docs_archive.html"/>
    <url>/tech-documentation/post/documentation_implementation/wiki_docs_archive.html</url>
    
    <content type="html"><![CDATA[<p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; ARCHIVE &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p><h1 id="Old-Discussion-Archive"><a href="#Old-Discussion-Archive" class="headerlink" title="Old Discussion Archive"></a>Old Discussion Archive</h1><p>– The bottom part is no longer relevant at this point</p><h2 id="Todo"><a href="#Todo" class="headerlink" title="Todo"></a>Todo</h2><p>Implement a wiki page and BookStack. Define the wiki &amp; BookStack roles and rules</p><h2 id="Details-of-Todo"><a href="#Details-of-Todo" class="headerlink" title="Details of Todo:"></a>Details of Todo:</h2><p>[ ] - POC on wiki to choose<br>[ ] - Try Setup, find useful plugins to include, Deploy<br>[ ] - Setup rules and roles in the wiki<br>[ ] - POC on Tech Documentation implementation&#x2F;others better solutions<br>[ ] - Try Setup, find useful plugins to include, Deploy<br>[ ] - Setup rules and roles in the Tech Documentation</p><h2 id="Criteria-for-Wiki"><a href="#Criteria-for-Wiki" class="headerlink" title="Criteria for Wiki:"></a>Criteria for Wiki:</h2><ol><li>Easy to edit, easy syntax recommendation<img src="./../../images/pm_wiki_edit_1.png" /><img src="./../../images/pm_wiki_edit_2.png" /></li><li>Role Permission to edit or view only, allow login</li></ol><h2 id="Wiki-Recommendations"><a href="#Wiki-Recommendations" class="headerlink" title="Wiki Recommendations"></a>Wiki Recommendations</h2><ol><li><a href="https://www.mediawiki.org/wiki/MediaWiki">MediaWiki</a><br>Example: <a href="https://www.wikipedia.org/">Wikipedia</a><br>Tech Stack: PHP</li><li><a href="https://www.pmwiki.org/wiki/PmWiki/PmWiki">PmWiki</a><br>Tech Stack: PHP</li><li>[DocuWiki] (<a href="https://www.dokuwiki.org/dokuwiki">https://www.dokuwiki.org/dokuwiki</a>)<br>Example:<br>Tech Stack: PHP</li><li><a href="https://docs.requarks.io/install/config">Wiki.js</a><br>Tech Stack: NodeJS</li></ol><h2 id="Criteria-for-Tech-Documentation"><a href="#Criteria-for-Tech-Documentation" class="headerlink" title="Criteria for Tech Documentation:"></a>Criteria for Tech Documentation:</h2><ol><li>All users can create new books</li><li>All users can comment on existing book</li><li>Login feature to disable outsider to enter</li></ol><h2 id="Tech-Documentation-Recommendations"><a href="#Tech-Documentation-Recommendations" class="headerlink" title="Tech Documentation Recommendations"></a>Tech Documentation Recommendations</h2><ol><li>BookStack<br>Example: <a href="https://demo.bookstackapp.com/">BookStack Demo</a><br><a href="https://www.bookstackapp.com/docs/admin/language-config/">Language Setup Guide</a></li><li><a href="https://hexo.io/">Hexo</a> - Disadvantage (it is public and requires minor coding)<br>Example: <a href="https://dylansalim-ola.github.io/tech-documentation/">here</a><br><a href="https://github.com/dylansalim-ola/tech-documentation/">repo</a></li></ol><h2 id="Open-for-discussion"><a href="#Open-for-discussion" class="headerlink" title="Open for discussion"></a>Open for discussion</h2><p>Links:<br><a href="https://geekflare.com/self-hosted-wiki-software/">https://geekflare.com/self-hosted-wiki-software/</a></p><h2 id="Current-Documentations"><a href="#Current-Documentations" class="headerlink" title="Current Documentations"></a>Current Documentations</h2><ul><li><a href="https://github.com/olachat/bumblebee/blob/main/docs/code_review_guideline/01.General_Guides.md">Bumblebee</a> </li><li><a href="https://www.youtube.com/playlist?list=PLoPO3cY_SOHn5Y207wg-CGAhPL9457r_E">Ola Youtube</a><br>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; ARCHIVE &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</li></ul>]]></content>
    
    
    <categories>
      
      <category>documentation_implementation</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>backup_love_letter</title>
    <link href="/tech-documentation/post/h5_%E6%B4%BB%E5%8A%A8/backup_love_letter.html"/>
    <url>/tech-documentation/post/h5_%E6%B4%BB%E5%8A%A8/backup_love_letter.html</url>
    
    <content type="html"><![CDATA[<h3 id="2-CP-Voting-amp-Prize-Box-Tab"><a href="#2-CP-Voting-amp-Prize-Box-Tab" class="headerlink" title="2. CP Voting &amp; Prize Box Tab"></a>2. CP Voting &amp; Prize Box Tab</h3><p>Desc: CP Voting Tab content</p><p>URL: &#x2F;activity&#x2F;best_cp_pk_event&#x2F;GetCPVotingTab</p><p>5 votes per day, recharge once get another voting chance</p><p>Sample Response:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;vote_remaining&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">//if vote left is 0, then the user is not allowed to vote</span><br>  <span class="hljs-attr">&quot;can_open_box&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// if user can open the box</span><br>  <span class="hljs-attr">&quot;reward_list&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;prize_type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;gift&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;钱兔似锦&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;desc&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;100金豆&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;gift&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;badge&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;10天&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;gift_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/.png&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="4-Love-Letter-Tab"><a href="#4-Love-Letter-Tab" class="headerlink" title="4. Love Letter Tab"></a>4. Love Letter Tab</h3><p>Desc: For display love letter content</p><p>URL: &#x2F;activity&#x2F;best_cp_pk_event&#x2F;GetLoveLetterBillboardTab</p><p>Contain sent love letter by the user, disappear after 24 hours</p><ul><li>Normal Love Letter limits at 20 words</li><li>Premium Love Letter limits at 40 words<br><br>Sample Request:</li></ul><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;can_send_normal_letter&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// if the normal letter have send limit</span><br>  <span class="hljs-attr">&quot;can_send_premium_letter&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// if the premium letter have send limit</span><br>  <span class="hljs-attr">&quot;not_rank_tips&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-comment">// if there isn&#x27;t any user in the rank return this, this will only display if the user rank list is empty, len(user_rank_list) == 0</span><br>    <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;暂时还没有情书&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;sub_title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;快去填写情书吧！&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;user_rank_list&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-comment">// if there is any user in the rank return the list of items, if not, return empty array, do not return null</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;rank_idx&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;left_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110298</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;boy&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;right_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110299</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;girl&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;cp_vote_accumulated&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">52000</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;letter_content&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;꧅你好(ؓؒؒؑؑؖؔؓؒؐؐ⁼̴̀ωؘؙؖؕؔؓؒؑؐؕ⁼̴̀ )꧅(ؓؒؒؑؑؖؔؓؒؐؐ⁼̴̀ωؘؙؖؕؔؓؒؑؐؕ⁼̴̀ )꧅(ؓؒؒؑؑؖؔؓؒؐؐ⁼̴̀ωؘؙؖؕؔؓؒؑؐؕ⁼̴̀ )꧅꧅&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;letter_date&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2023年7月10日&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;letter_time&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;12:02&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="5-Display-Voting-CP-List"><a href="#5-Display-Voting-CP-List" class="headerlink" title="5. Display Voting CP List"></a>5. Display Voting CP List</h3><p>Desc: For display Voting CP List</p><p>URL: &#x2F;activity&#x2F;best_cp_pk_event&#x2F;GetInitialVotingCPList</p><p>Return 50 entries of Voting CP List<br>Sample Request:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;error_message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;你已经投票五次了&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// default: &quot;&quot;</span><br>  <span class="hljs-attr">&quot;cp_list_to_vote&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;cp_vote_idx&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;left_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110298</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;boy&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;right_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110299</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;girl&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;can_vote&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span> <span class="hljs-comment">// 1 for can vote, 0 for cannot</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="6-Search-Related-Voting-CP-List"><a href="#6-Search-Related-Voting-CP-List" class="headerlink" title="6. Search Related Voting CP List"></a>6. Search Related Voting CP List</h3><p>Desc: Search request for Related Voting CP List, by uid and name</p><p>URL: &#x2F;activity&#x2F;best_cp_pk_event&#x2F;SearchCPList</p><p>This api only call if user searched</p><p>Sample Request</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;search_text&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;112&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>Sample Response:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;msg&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;没有资料&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;cp_list_to_vote&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;cp_vote_idx&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;left_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110298</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;boy&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;right_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110299</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;girl&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;can_vote&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span> <span class="hljs-comment">// 1 for can vote, 0 for cannot</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="7-Vote-for-CP"><a href="#7-Vote-for-CP" class="headerlink" title="7. Vote for CP"></a>7. Vote for CP</h3><p>Sample Request</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;cp_vote_idx&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>Sample Response:<br>return success: true by default</p><h3 id="8-Send-Love-Letter"><a href="#8-Send-Love-Letter" class="headerlink" title="8. Send Love Letter"></a>8. Send Love Letter</h3><p>Disclaimer: The get friend list api was skip if the UI for friend selection to send love letter can be done via mobile<br>&amp; if the letter can send to the same user multiple times</p><p>Desc: API for sending love letter</p><p>URL: &#x2F;activity&#x2F;cp_valentine_event&#x2F;SendLoveLetter</p><p>Sample Request</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;cp_vote_idx&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>Sample Response:<br>return success: true by default</p><h3 id="9-Send-Normal-Love-Letter"><a href="#9-Send-Normal-Love-Letter" class="headerlink" title="9. Send Normal Love Letter"></a>9. Send Normal Love Letter</h3><h3 id="10-Send-Premium-Love-Letter"><a href="#10-Send-Premium-Love-Letter" class="headerlink" title="10. Send Premium Love Letter"></a>10. Send Premium Love Letter</h3><p>Disclaimer: The get friend list api was skip if the UI for friend selection to send love letter can be done via mobile<br>&amp; if the letter can send to the same user multiple times</p><p>Desc: API for sending love letter</p><p>URL: &#x2F;activity&#x2F;cp_valentine_event&#x2F;SendNormalLoveLetter<br>URL: &#x2F;activity&#x2F;cp_valentine_event&#x2F;SendPremiumLoveLetter</p><p>Sample Request</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;love_letter_msg&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;꧅你好(ؓؒؒؑؑؖؔؓؒؐؐ⁼̴̀ωؘؙؖؕؔؓؒؑؐؕ⁼̴̀ )꧅(ؓؒؒؑؑؖؔؓؒؐؐ⁼̴̀ωؘؙؖؕؔؓؒؑؐؕ⁼̴̀ )꧅(ؓؒؒؑؑؖؔؓؒؐؐ⁼̴̀ωؘؙؖؕؔؓؒؑؐؕ⁼̴̀ )꧅꧅&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>Sample Response:<br>return success: true by default</p><h3 id="11-Display-Love-letter-inbox"><a href="#11-Display-Love-letter-inbox" class="headerlink" title="11. Display Love letter inbox"></a>11. Display Love letter inbox</h3><p>Desc: For display Love letter inbox, display all inbox</p><p>URL: &#x2F;activity&#x2F;best_cp_pk_event&#x2F;GetLoveLetterInboxList</p><p>Sample Response:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;error_message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">//没有信息不会放在这里</span><br>  <span class="hljs-attr">&quot;cp_list_to_vote&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;cp_vote_idx&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;left_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110298</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;boy&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;right_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110299</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;girl&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;can_vote&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span> <span class="hljs-comment">// 1 for can vote, 0 for cannot</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="12-Display-Task-list"><a href="#12-Display-Task-list" class="headerlink" title="12. Display Task list"></a>12. Display Task list</h3><p>Desc: For display Love letter inbox, display all inbox</p><p>URL: &#x2F;activity&#x2F;best_cp_pk_event&#x2F;GetTaskList</p><p>Sample Response:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;error_message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">//没有信息不会放在这里</span><br>  <span class="hljs-attr">&quot;task_list&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;task_idx&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;任务 1&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;desc&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;情侣签到&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;current_progress_point&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;max_progress_point&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;cp_heart_point&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">30</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;UNCLAIMED&quot;</span> <span class="hljs-comment">//enum of &#123;UNCLAIMED, CLAIMED, UNAVAILABLE&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="13-Claim-Task-list"><a href="#13-Claim-Task-list" class="headerlink" title="13. Claim Task list"></a>13. Claim Task list</h3><p>Desc: For display Love letter inbox, display all inbox</p><p>URL: &#x2F;activity&#x2F;best_cp_pk_event&#x2F;ClaimTaskList</p><p>Sample Request:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;task_idx&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>Sample Response:<br>return success: true by default</p>]]></content>
    
    
    <categories>
      
      <category>h5_活动</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Mount Harddisk gracefully</title>
    <link href="/tech-documentation/post/practice/technical_note/mount_harddisk_gracefully.html"/>
    <url>/tech-documentation/post/practice/technical_note/mount_harddisk_gracefully.html</url>
    
    <content type="html"><![CDATA[<p>Q: My Mac server is running out of disk space. I bought and attached an external hard drive to it. What’s the best way to configure it? Desired behaviour: 1. Without changing application configuration, the system offload certain folders, e.g. &#x2F;Users&#x2F;ci&#x2F;go&#x2F;mod&#x2F; to the external hard drive. 2. The system or application shouldn’t fail if the external hard drive was unplugged.</p><p>A:</p><p>Solution 1: Automounting an External Drive to specific folder using <code>/etc/fstab</code></p><p>Step 1:  Find UUID of external drive<br><code>diskutil info /Volumes/&lt;Drive to map&gt; | grep &#39;Volume UUID&#39;</code></p><p>Step 2: Create a folder to map specific disk<br><code>sudo mkdir -p &lt;Folder to map&gt;</code></p><p>Step 3: Add the UUID entry and map it to the folder we created earlier </p><ul><li>Open <code>/etc/fstab</code> </li><li>Add the following UUID entry to the <code>/etc/fstab</code></li></ul><p><code>UUID=&lt;UUID from step 1&gt; &lt;Folder to map&gt; hfs rw,auto</code></p><p>Solution 2:<br>Step 1: Create a backup folder<br><code>mkdir -p /Users/ci/go/mod_fallback</code></p><p>Step 2: Create a cron script to check if the Volume is mounted, use Symbolic links to dynamically links the folder</p><h3 id="automount-harddisk-sh"><a href="#automount-harddisk-sh" class="headerlink" title="automount-harddisk.sh"></a>automount-harddisk.sh</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><br><span class="hljs-comment"># Check if the external drive is mounted</span><br><span class="hljs-keyword">if</span> mount | grep -q <span class="hljs-string">&#x27;/Volumes/ExternalDriveName&#x27;</span>; <span class="hljs-keyword">then</span><br>    <span class="hljs-comment"># If the external drive is mounted, ensure the symlink points to it</span><br>    <span class="hljs-keyword">if</span> [ ! -L /Users/ci/go/mod ]; <span class="hljs-keyword">then</span><br>        sudo <span class="hljs-built_in">rm</span> -rf /Users/ci/go/mod<br>        sudo <span class="hljs-built_in">ln</span> -s /Volumes/ExternalDriveName/ci_go_mod /Users/ci/go/mod<br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;External drive mounted. Symlink points to external drive.&quot;</span><br>    <span class="hljs-keyword">fi</span><br><span class="hljs-keyword">else</span><br>    <span class="hljs-comment"># If the external drive is not mounted, point to fallback</span><br>    <span class="hljs-keyword">if</span> [ ! -L /Users/ci/go/mod ]; <span class="hljs-keyword">then</span><br>        sudo <span class="hljs-built_in">rm</span> -rf /Users/ci/go/mod<br>        sudo <span class="hljs-built_in">ln</span> -s /Users/ci/go/mod_fallback /Users/ci/go/mod<br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;External drive not mounted. Using local fallback.&quot;</span><br>    <span class="hljs-keyword">fi</span><br><span class="hljs-keyword">fi</span><br><br></code></pre></td></tr></table></figure><p>Run this script periodically<br><code>* * * * * /automount-harddisk.sh</code></p><p>References:<br>disk uuid mapping - <a href="https://www.redhat.com/sysadmin/etc-fstab">https://www.redhat.com/sysadmin/etc-fstab</a></p>]]></content>
    
    
    <categories>
      
      <category>practice</category>
      
      <category>technical_note</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hardware</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Go Check log</title>
    <link href="/tech-documentation/post/practice/technical_note/backend_go.html"/>
    <url>/tech-documentation/post/practice/technical_note/backend_go.html</url>
    
    <content type="html"><![CDATA[<h2 id="pt-oversea"><a href="#pt-oversea" class="headerlink" title="pt-oversea"></a>pt-oversea</h2><ol><li><p>cd into supervisor conf</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">cdconf</span><br></code></pre></td></tr></table></figure><p>OR</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">cd <span class="hljs-regexp">/etc/</span>supervisor/conf.d<br></code></pre></td></tr></table></figure></li><li><p>Print out your preferred conf</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">cat</span> go_activity.http-77.<span class="hljs-keyword">conf</span><br></code></pre></td></tr></table></figure></li><li><p>Get the log location and tail the log</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">less +G <span class="hljs-regexp">/home/</span>webroot<span class="hljs-regexp">/olachat/</span>pt-activity<span class="hljs-regexp">/77/</span>log/http.stdout.log<br></code></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    <categories>
      
      <category>practice</category>
      
      <category>technical_note</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Go</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PHP Check log</title>
    <link href="/tech-documentation/post/practice/technical_note/backend_php.html"/>
    <url>/tech-documentation/post/practice/technical_note/backend_php.html</url>
    
    <content type="html"><![CDATA[<h2 id="pt-oversea"><a href="#pt-oversea" class="headerlink" title="pt-oversea"></a>pt-oversea</h2><ol><li>cd into webroot<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">cd <span class="hljs-regexp">/home/</span>webroot<span class="hljs-regexp">/pt-oversea/</span>&lt;branch&gt;<span class="hljs-regexp">/cache/</span>log/<br></code></pre></td></tr></table></figure></li></ol><h2 id="PHP-Check-log"><a href="#PHP-Check-log" class="headerlink" title="PHP Check log"></a>PHP Check log</h2><ol><li>Check &amp; verify supervisor config name<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">supervisorctl status <span class="hljs-string">| grep -i &quot;</span>php_activity<span class="hljs-string">&quot;</span><br></code></pre></td></tr></table></figure></li><li>Cd into the conf folder<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">cdconf</span><br></code></pre></td></tr></table></figure>NOTE: cdconf is an alias to <code>/etc/supervisor/conf.d</code></li><li>List out all the config info of the cmd task to log<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">cat</span> php_activity.cmd.pt_pay_welfare.<span class="hljs-keyword">conf</span><br></code></pre></td></tr></table></figure></li></ol><p>Example conf:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[program:php_activity.cmd.pt_pay_welfare]</span><br><span class="hljs-attr">directory</span> = /home/webroot/olachat/pta-activity/<span class="hljs-number">12</span><br><span class="hljs-attr">command</span> = php /home/webroot/olachat/pta-activity/<span class="hljs-number">12</span>/cli.php pt_pay_welfare<br><span class="hljs-attr">autostart</span> = <span class="hljs-literal">true</span><br><span class="hljs-attr">autorestart</span> = <span class="hljs-literal">true</span><br><span class="hljs-attr">startsecs</span> = <span class="hljs-number">10</span><br><span class="hljs-attr">stdout_logfile</span> = /home/ecs-user/log/php_activity/php_activity.cmd.pt_pay_welfare.stdout.log<br><span class="hljs-attr">stdout_logfile_backups</span> = <span class="hljs-number">10</span><br><span class="hljs-attr">stdout_capture_maxbytes</span> = <span class="hljs-number">1</span>MB<br><span class="hljs-attr">stdout_logfile_maxbytes</span> = <span class="hljs-number">20</span>MB<br><span class="hljs-attr">redirect_stderr</span> = <span class="hljs-literal">true</span><br><span class="hljs-attr">stderr_logfile</span> = /home/ecs-user/log/php_activity/php_activity.cmd.pt_pay_welfare.stderr.log<br><span class="hljs-attr">stderr_logfile_backups</span> = <span class="hljs-number">10</span><br><span class="hljs-attr">stderr_capture_maxbytes</span> = <span class="hljs-number">1</span>MB<br><span class="hljs-attr">stderr_logfile_maxbytes</span> = <span class="hljs-number">1</span>MB<br><span class="hljs-attr">user</span> = ecs-user<br></code></pre></td></tr></table></figure><p>Copy and directory name</p><ol start="4"><li><p>Cd into the directory path</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">cd <span class="hljs-regexp">/home/</span>webroot<span class="hljs-regexp">/olachat/</span>pta-activity/<span class="hljs-number">12</span><br></code></pre></td></tr></table></figure></li><li><p>Tail log from the cache folder</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">tail -f cache/<span class="hljs-built_in">log</span>/web_debug_2024-<span class="hljs-number">09</span>-<span class="hljs-number">04</span>.<span class="hljs-built_in">log</span> <span class="hljs-string">| grep &quot;</span>kanfjdks<span class="hljs-string">&quot;</span><br></code></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    <categories>
      
      <category>practice</category>
      
      <category>technical_note</category>
      
    </categories>
    
    
    <tags>
      
      <tag>PHP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PT Flutter Web自动部署</title>
    <link href="/tech-documentation/post/H5%E9%83%A8%E7%BD%B2/H5_flutter_web.html"/>
    <url>/tech-documentation/post/H5%E9%83%A8%E7%BD%B2/H5_flutter_web.html</url>
    
    <content type="html"><![CDATA[<blockquote><p>PT Flutter Web自动部署</p></blockquote><span id="more"></span><h1 id="PT-Flutter-Web自动部署"><a href="#PT-Flutter-Web自动部署" class="headerlink" title="PT Flutter Web自动部署"></a>PT Flutter Web自动部署</h1><ul><li>PT Flutter web新的代码库： <a href="https://github.com/olachat/pt-zh-flutter-web-page">https://github.com/olachat/pt-zh-flutter-web-page</a></li><li>PT Flutter web 打包后的代码库（包含build文件）：<a href="https://github.com/olachat/pt-web-page-build">https://github.com/olachat/pt-web-page-build</a></li><li>Github Actions yaml: <a href="https://github.com/olachat/pt-zh-flutter-web-page/blob/master/.github/workflows/build.yaml">https://github.com/olachat/pt-zh-flutter-web-page/blob/master/.github/workflows/build.yaml</a></li><li>Aliyun flow: <a href="https://flow.aliyun.com/pipelines/2493185/current">https://flow.aliyun.com/pipelines/2493185/current</a></li><li>新flutter web 域名：<ul><li><a href="https://page.partying.tw/flutter/pt/">https://page.partying.tw/flutter/pt/</a> （线上）</li><li><a href="https://page.partying.chat/flutter/pt/">https://page.partying.chat/flutter/pt/</a> （线上，国内域名）</li><li><a href="https://page.partying.dev/flutter/pt/">https://page.partying.dev/flutter/pt/</a> (dev)</li></ul></li><li>部署事件bot: partying-web-bot (可以找 Dylan Salim 石田 要求slack channel权限)</li></ul><h2 id="自动部署使用指南："><a href="#自动部署使用指南：" class="headerlink" title="自动部署使用指南："></a>自动部署使用指南：</h2><p>只需要pr进master或者dev就会自动部署</p><h2 id="自动部署flow："><a href="#自动部署flow：" class="headerlink" title="自动部署flow："></a>自动部署flow：</h2><ol><li><p>新flutter web的github actions会聆听beta和dev分支，Master 和dev 分支都需要以pr的方式提交代码。<br>Github actions 的代码请查看 <a href="https://github.com/olachat/pt-zh-flutter-web-page/blob/master/.github/workflows/build.yaml">action</a><br>如果有新的commit，便会通知partying-web-bot的slack群。</p><img src="./../../images/h5_flutter_deploy/bot_processing.png" /></li><li><p>Flutter web的打包动作会由github actions去触发，调用我们客户端的打包机器去打包文件。<br>打包的脚本: <a href="https://github.com/olachat/pt-zh-flutter-web-page/blob/master/.github/workflows/scripts/build-prod.sh">https://github.com/olachat/pt-zh-flutter-web-page/blob/master/.github/workflows/scripts/build-prod.sh</a></p></li><li><p>打包完成后，actions会上载至另一个打包后的代码库, <a href="https://github.com/olachat/pt-web-page-build/tree/master">pt-web-page-build</a> (用法和web-page-flutter的代码库相似)。</p></li><li><p>在上载build文件后， github actions 会触发一个webhook通知云效。<br>云效在收到请求后，会搬运文件去我们新的pt-h5的机器。<br>搬运的branch名是通过webhook param传的。(都在github actions里)<br>阿里云云效: <a href="https://flow.aliyun.com/pipelines/2493185/current">https://flow.aliyun.com/pipelines/2493185/current</a><br>发送webhook后，会更新之前的slack信息</p><img src="./../../images/h5_flutter_deploy/bot_copying.png" /></li><li><p>云效搬运好后，会更新之前的slack信息</p><img src="./../../images/h5_flutter_deploy/bot_done.png" /></li></ol><ul><li>云效flow config<img src="./../../images/h5_flutter_deploy/yunxiao.png" /></li></ul><h2 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h2><ol><li>云效里有什么功能？为什么使用云效而不是使用 <code>scp</code> 拷贝去部署机器？<br>A: 云效只有拷贝文件和通知slack部署已经完成的功能<br>此功能也能使用 <code>scp</code> 完成，<code>scp</code>也会比云效快<br>我们这次的自动部署功能改用云效是因为安全考量，不把机器ssh token存在github里</li></ol>]]></content>
    
    
    <categories>
      
      <category>H5部署</category>
      
    </categories>
    
    
    <tags>
      
      <tag>H5</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Code Documentation</title>
    <link href="/tech-documentation/post/documentation_implementation/code_documentation.html"/>
    <url>/tech-documentation/post/documentation_implementation/code_documentation.html</url>
    
    <content type="html"><![CDATA[<blockquote><p>Code Documentation Implementation</p></blockquote><span id="more"></span><h1 id="Code-Documentation-Implementations"><a href="#Code-Documentation-Implementations" class="headerlink" title="Code Documentation Implementations"></a>Code Documentation Implementations</h1><h2 id="Aim"><a href="#Aim" class="headerlink" title="Aim:"></a>Aim:</h2><p>To ease the onboarding process of a new frontend developer into veeka-app, from setup to productions. This documentation should be minimal, short and concise. The complex documentation should be included in the wiki&#x2F;bookstack.</p><h3 id="Stakeholder"><a href="#Stakeholder" class="headerlink" title="Stakeholder"></a>Stakeholder</h3><ul><li>All client engineers (especially for new client engineers onboarding)</li></ul><h2 id="Todo"><a href="#Todo" class="headerlink" title="Todo:"></a>Todo:</h2><p>Rewrite the README.md to acts as an easy setup documentation for newcomers to refer</p><h2 id="Details-of-Todo-Frontend"><a href="#Details-of-Todo-Frontend" class="headerlink" title="Details of Todo(Frontend):"></a>Details of Todo(Frontend):</h2><p>[ ] - Project Setup Guide (Apply flutter.diff, hammer in VSCode)<br>[ ] - Include script to generate @JsonSerializable g.dart, store g.dart, proto twirp.dart file<br>[ ] - Include guides&#x2F;links to technologies we used, eg. mobx, how to crowdin, how to push assets to oss etc<br>[ ] - Include recommended ways to doing things in this codebase, eg. communication between different subproject<br>[ ] - Brief explanation on how our code base is structured, can use a diagram to illustrate it<br>[ ] - Business logic specific details should not cover in this README.md</p>]]></content>
    
    
    <categories>
      
      <category>documentation_implementation</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Documentation</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Wiki Documentation</title>
    <link href="/tech-documentation/post/documentation_implementation/wiki_documentation.html"/>
    <url>/tech-documentation/post/documentation_implementation/wiki_documentation.html</url>
    
    <content type="html"><![CDATA[<blockquote><p>Wiki Implementation</p></blockquote><span id="more"></span><h1 id="Wiki-amp-Tech-Documentation"><a href="#Wiki-amp-Tech-Documentation" class="headerlink" title="Wiki &amp; Tech Documentation"></a>Wiki &amp; Tech Documentation</h1><p>Wiki Link: <a href="https://github.com/olachat/veeka/wiki">https://github.com/olachat/veeka/wiki</a></p><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>Knowledge sharing and documentation play a crucial role in organizations, as they facilitate the transfer of information, best practices, and lessons learned. Currently, we didn’t use our wiki good enough, most of the time our knowledge is scattered across various systems, files, and individuals, it becomes difficult to locate and access relevant information.    </p><h2 id="Aim"><a href="#Aim" class="headerlink" title="Aim"></a>Aim</h2><ul><li>To create a centralized, general purpose repository of knowledge for all employees in SG team (current state, may be expanded to all in the future)</li><li>Allows employees to share expertise, document processes, and collaborate on projects</li><li>Fosters a culture of continuous learning and knowledge exchange, enabling the company to retain institutional knowledge and improve efficiency.</li><li>One stop wiki for all, wiki shouldn’t include extensive tech stuff, but links to guides (included with tags for easy searching)</li></ul><h3 id="Criteria-for-Tech-Wiki"><a href="#Criteria-for-Tech-Wiki" class="headerlink" title="Criteria for Tech Wiki"></a>Criteria for Tech Wiki</h3><ol><li><p>Purpose and Scope: Clearly define the purpose, audience, and topics covered in the tech team wiki.  </p></li><li><p>Structure and Organization: Create a well-organized structure with categories, headings, and a table of contents&#x2F;index for easy navigation.</p></li><li><p>Collaboration and Access Control: Enable team members to contribute while maintaining appropriate access controls.</p></li><li><p>Documentation Guidelines: Establish standards for consistent formatting and style.</p></li><li><p>Code Snippets and Examples: Include code examples and tutorials to illustrate best practices.</p></li><li><p>Troubleshooting and FAQs: Provide guides and solutions for common issues and frequently asked questions.</p></li><li><p>Tools and Technology Documentation: Document installation, configuration, and usage of tools and technologies used by the team.</p></li><li><p>Knowledge Sharing Initiatives: Encourage team members to share their expertise and reward contributions.</p></li><li><p>Regular Updates and Maintenance: Assign responsibility for updating and reviewing content to ensure accuracy.</p></li><li><p>Training and Onboarding: Use the wiki as a resource for training new team members and onboarding them effectively.</p></li></ol><h3 id="Stakeholder"><a href="#Stakeholder" class="headerlink" title="Stakeholder"></a>Stakeholder</h3><ul><li>All employees (Internal tech first, then expand)</li></ul><h2 id="This-wiki-documentation-may-consist-of-2-parts"><a href="#This-wiki-documentation-may-consist-of-2-parts" class="headerlink" title="This wiki documentation may consist of 2 parts:"></a>This wiki documentation may consist of 2 parts:</h2><ol><li>General Purpose Wiki - Includes links to docs, short guides (extensive tech documentations should not be included in this wiki)</li><li>Tech Documentation - Includes tech-only extensive documentation (Inside the Veeka REPO)</li></ol><h3 id="Discussion-point"><a href="#Discussion-point" class="headerlink" title="Discussion point"></a>Discussion point</h3><ol><li>Would you benefit from this wiki&#x2F;tech docs? What can we enhance?</li><li>An architecture diagram does help to give an overall picture of a system flow. Do we need to setup a workflow where backend and frontend developers sit down and develop such diagram for future reference?<img src="./../../images/architecture_diagram.png" /></li><li>Discussion point on the implementation of tech wiki from ChatGPT<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">One important <span class="hljs-keyword">discussion </span>point when implementing a tech wiki could <span class="hljs-keyword">be </span>the process <span class="hljs-keyword">and </span>guidelines for creating <span class="hljs-keyword">and </span>maintaining the wiki. Here are some potential <span class="hljs-keyword">discussion </span>points to consider:<br><br><span class="hljs-number">1</span>. Objectives <span class="hljs-keyword">and </span><span class="hljs-keyword">Scope: </span><span class="hljs-keyword">Discuss </span>the specific objectives of the tech wiki. Identify the <span class="hljs-keyword">scope </span>of information to <span class="hljs-keyword">be </span>included, such as documentation, <span class="hljs-keyword">best </span>practices, coding standards, project guidelines, troubleshooting guides, <span class="hljs-keyword">or </span>tool documentation.<br><br><span class="hljs-number">2</span>. Roles <span class="hljs-keyword">and </span>Responsibilities: Determine the roles <span class="hljs-keyword">and </span>responsibilities within the team for creating, reviewing, <span class="hljs-keyword">and </span>maintaining the wiki content. Assign individuals <span class="hljs-keyword">or </span>teams to oversee <span class="hljs-keyword">different </span>sections <span class="hljs-keyword">or </span>categories of the wiki to ensure accountability <span class="hljs-keyword">and </span>ownership.<br><br><span class="hljs-number">3</span>. Content Creation Guidelines: Establish guidelines for creating content in the wiki. <span class="hljs-keyword">Discuss </span>formatting standards, use of templates, <span class="hljs-keyword">and </span><span class="hljs-keyword">best </span>practices for <span class="hljs-keyword">organizing </span><span class="hljs-keyword">and </span>structuring information. Consider including guidelines for documenting code snippets, <span class="hljs-keyword">diagrams, </span><span class="hljs-keyword">and </span>examples.<br><br><span class="hljs-number">4</span>. Review <span class="hljs-keyword">and </span>Approval Process: Define a review <span class="hljs-keyword">and </span>approval process for the wiki content to ensure accuracy <span class="hljs-keyword">and </span>quality. <span class="hljs-keyword">Discuss </span>how team members can contribute to content review <span class="hljs-keyword">and </span>how to handle conflicts <span class="hljs-keyword">or </span><span class="hljs-keyword">disagreements </span>during the review process.<br><br><span class="hljs-number">5</span>. Documentation Updates <span class="hljs-keyword">and </span>Maintenance: <span class="hljs-keyword">Discuss </span>how the wiki will <span class="hljs-keyword">be </span>kept up to date. Determine the frequency of updates <span class="hljs-keyword">and </span>establish a process for maintaining the accuracy <span class="hljs-keyword">and </span>relevance of the information over time. Identify individuals <span class="hljs-keyword">or </span>teams responsible for monitoring <span class="hljs-keyword">and </span>updating the wiki content.<br><br><span class="hljs-number">6</span>. Knowledge <span class="hljs-keyword">Sharing </span>Culture: Encourage a culture of knowledge <span class="hljs-keyword">sharing </span>within the team. <span class="hljs-keyword">Discuss </span>the importance of actively contributing to the wiki <span class="hljs-keyword">and </span>how it <span class="hljs-keyword">benefits </span>the team<span class="hljs-string">&#x27;s overall productivity and efficiency. Encourage team members to share their expertise, lessons learned, and new insights through the wiki.</span><br><span class="hljs-string"></span><br><span class="hljs-string">7. Integration with Workflows and Processes: Explore how the tech wiki can integrate with existing workflows and processes within the team. Discuss how team members can easily access and reference the wiki during their day-to-day tasks. Consider integrating the wiki with project management tools, code repositories, or communication platforms to enhance collaboration and streamline processes.</span><br><span class="hljs-string"></span><br><span class="hljs-string">8. Training and Onboarding: Discuss how new team members will be introduced to the tech wiki. Consider providing training or onboarding sessions to familiarize them with the wiki&#x27;</span>s purpose, structure, <span class="hljs-keyword">and </span>usage. <span class="hljs-keyword">Address </span>any questions <span class="hljs-keyword">or </span>concerns regarding the learning curve associated with the wiki platform <span class="hljs-keyword">or </span>processes.<br><br><span class="hljs-number">9</span>. Promotion <span class="hljs-keyword">and </span>Adoption: <span class="hljs-keyword">Discuss </span>strategies for promoting <span class="hljs-keyword">and </span>encouraging adoption of the tech wiki within the team. Consider creating awareness through team meetings, presentations, <span class="hljs-keyword">or </span>regular updates. Highlight the <span class="hljs-keyword">benefits </span>of using the wiki <span class="hljs-keyword">and </span><span class="hljs-keyword">showcase </span>success stories to motivate team members to actively engage with it.<br><br><span class="hljs-number">10</span>. Feedback <span class="hljs-keyword">and </span>Improvement: Establish a feedback mechanism to continuously improve the tech wiki. Encourage team members to provide suggestions, report issues, <span class="hljs-keyword">or </span>propose new features for the wiki. <span class="hljs-keyword">Discuss </span>how feedback will <span class="hljs-keyword">be </span>evaluated <span class="hljs-keyword">and </span>incorporated into future iterations of the wiki implementation.<br><br><span class="hljs-keyword">By </span>engaging in <span class="hljs-keyword">discussions </span>around these points, the team can establish clear guidelines, expectations, <span class="hljs-keyword">and </span>processes for successfully implementing <span class="hljs-keyword">and </span>maintaining the tech wiki, fostering effective knowledge <span class="hljs-keyword">sharing </span><span class="hljs-keyword">and </span>collaboration within the team.<br></code></pre></td></tr></table></figure></li></ol><p>Feel free to leave comments down below if you have any questions or comments</p>]]></content>
    
    
    <categories>
      
      <category>documentation_implementation</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Documentation</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>H5 React Technical note</title>
    <link href="/tech-documentation/post/practice/technical_note/h5_technical_note.html"/>
    <url>/tech-documentation/post/practice/technical_note/h5_technical_note.html</url>
    
    <content type="html"><![CDATA[<h2 id="H5-Proto-to-Typescript"><a href="#H5-Proto-to-Typescript" class="headerlink" title="H5 Proto to Typescript"></a>H5 Proto to Typescript</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">protoc --plugin=./node_modules/.bin/protoc-gen-ts_proto --ts_proto_out=. ./src/service/best_cp_event.proto --ts_proto_opt=esModuleInterop=<span class="hljs-literal">true</span> --ts_proto_opt=<span class="hljs-built_in">env</span>=browser<br></code></pre></td></tr></table></figure><h2 id="Veeka-H5-Template-API-caching-state-management-easy-styling"><a href="#Veeka-H5-Template-API-caching-state-management-easy-styling" class="headerlink" title="Veeka H5 Template (API caching + state management + easy styling)"></a>Veeka H5 Template (API caching + state management + easy styling)</h2><h3 id="Slide-Demo-https-docs-google-com-presentation-d-1DPcB5lB6Esmf8gF42XMDSnbSejtVU6SZPph78rFzOQc-edit-usp-sharing"><a href="#Slide-Demo-https-docs-google-com-presentation-d-1DPcB5lB6Esmf8gF42XMDSnbSejtVU6SZPph78rFzOQc-edit-usp-sharing" class="headerlink" title="Slide Demo: https://docs.google.com/presentation/d/1DPcB5lB6Esmf8gF42XMDSnbSejtVU6SZPph78rFzOQc/edit?usp=sharing"></a>Slide Demo: <a href="https://docs.google.com/presentation/d/1DPcB5lB6Esmf8gF42XMDSnbSejtVU6SZPph78rFzOQc/edit?usp=sharing">https://docs.google.com/presentation/d/1DPcB5lB6Esmf8gF42XMDSnbSejtVU6SZPph78rFzOQc/edit?usp=sharing</a></h3><h3 id="Repo-link-https-github-com-olaola-chat-web-veeka-page-tree-master-veeka-h5-template"><a href="#Repo-link-https-github-com-olaola-chat-web-veeka-page-tree-master-veeka-h5-template" class="headerlink" title="Repo link: https://github.com/olaola-chat/web-veeka-page/tree/master/veeka-h5-template"></a>Repo link: <a href="https://github.com/olaola-chat/web-veeka-page/tree/master/veeka-h5-template">https://github.com/olaola-chat/web-veeka-page/tree/master/veeka-h5-template</a></h3><h3 id="Ticket-link-https-github-com-olachat-veeka-issues-4541"><a href="#Ticket-link-https-github-com-olachat-veeka-issues-4541" class="headerlink" title="Ticket link: https://github.com/olachat/veeka/issues/4541"></a>Ticket link: <a href="https://github.com/olachat/veeka/issues/4541">https://github.com/olachat/veeka/issues/4541</a></h3><h3 id="Please-read-the-following-before-using-this-template"><a href="#Please-read-the-following-before-using-this-template" class="headerlink" title="Please read the following before using this template:"></a>Please read the following before using this template:</h3><h3 id="Things-to-update"><a href="#Things-to-update" class="headerlink" title="Things to update:"></a>Things to update:</h3><ol><li>Update the vite.config.ts, set viewportWidth to 375px<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-title function_">postcssPX2viewport</span>(&#123;<br>      <span class="hljs-attr">unitToConvert</span>: <span class="hljs-string">&#x27;px&#x27;</span>,<br>      <span class="hljs-comment">// viewportWidth: 375, //use this for new project</span><br>      <span class="hljs-attr">viewportWidth</span>: <span class="hljs-number">750</span>,<br>      <span class="hljs-attr">unitPrecision</span>: <span class="hljs-number">5</span>,<br>      <span class="hljs-attr">propList</span>: [<span class="hljs-string">&#x27;*&#x27;</span>],<br>      <span class="hljs-attr">viewportUnit</span>: <span class="hljs-string">&#x27;vw&#x27;</span>,<br>      <span class="hljs-attr">fontViewportUnit</span>: <span class="hljs-string">&#x27;vw&#x27;</span>,<br>      <span class="hljs-attr">selectorBlackList</span>: [],<br>      <span class="hljs-attr">minPixelValue</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">mediaQuery</span>: <span class="hljs-literal">false</span>,<br>      <span class="hljs-attr">replace</span>: <span class="hljs-literal">true</span>,<br>      <span class="hljs-attr">exclude</span>: <span class="hljs-literal">undefined</span>,<br>      <span class="hljs-attr">include</span>: <span class="hljs-literal">undefined</span>,<br>      <span class="hljs-attr">landscape</span>: <span class="hljs-literal">false</span>,<br>      <span class="hljs-attr">landscapeUnit</span>: <span class="hljs-string">&#x27;vw&#x27;</span>,<br>      <span class="hljs-attr">landscapeWidth</span>: <span class="hljs-number">568</span><br>  &#125;)<br></code></pre></td></tr></table></figure></li><li>Alter&#x2F;Remove the following files according to project needs: <br><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-params">---</span> <span class="hljs-string">/src</span><br>    <span class="hljs-params">---</span> components<br>    <span class="hljs-params">---</span> <span class="hljs-string">/context</span><br>        <span class="hljs-params">---</span> <span class="hljs-string">/globalContext/useBillboardTabIndex.ts</span><br>        <span class="hljs-params">---</span> <span class="hljs-string">/Tabs</span><br>    <span class="hljs-params">---</span> <span class="hljs-string">/hooks</span><br>    <span class="hljs-params">---</span> <span class="hljs-string">/locale</span><br>    <span class="hljs-params">---</span> <span class="hljs-string">/pages</span><br>    <span class="hljs-params">---</span> <span class="hljs-string">/service</span><br></code></pre></td></tr></table></figure></li></ol><h3 id="Motivation"><a href="#Motivation" class="headerlink" title="Motivation"></a>Motivation</h3><p>Serve as a standardized H5 template for easy project creation and example to showcase the power of React Query to handle server side state + API caching and windicss for utility class styling <br><br>It includes:</p><ul><li>React Query for caching and easy configuration with API for handling server state</li><li>Custom context level state management for non-server state</li><li>Windicss for easy styling</li><li>Clean up unused components file</li><li>Pre-configure to work for our use cases</li></ul><h3 id="Why-API-Caching-in-H5-activity"><a href="#Why-API-Caching-in-H5-activity" class="headerlink" title="Why API Caching in H5 activity"></a>Why API Caching in H5 activity</h3><p>API caching is useful for the following scenarios:</p><ol><li>Multi page activity page</li><li>Activity page with refetching function. Instead of clearing all the data during refetching, we can display previous cache data while display new data when it is done, this provides a better user experience for user with slower internet connection. However, a different loading mechanism for refetching will need to be introduced. Refer to the what’s next section for more. <br><br>(*First loading and refetching will need to have separate mechanism)</li></ol><h3 id="Important-Dependencies-and-its-usage"><a href="#Important-Dependencies-and-its-usage" class="headerlink" title="Important Dependencies and its usage:"></a>Important Dependencies and its usage:</h3><ul><li>@tanstack&#x2F;react-query<br><br>Library for data fetching, caching, synchronizing API state.<br><br>Read more: <a href="https://tanstack.com/query/v4/docs/overview">https://tanstack.com/query/v4/docs/overview</a> <br><br><a href="https://tkdodo.eu/blog/practical-react-query">https://tkdodo.eu/blog/practical-react-query</a></li><li>@tanstack&#x2F;react-query-devtools<br><br>React Query devtools that only available in local</li><li>windicss<br><br>Windi CSS as an on-demand alternative to Tailwind, which provides faster load times<br><br>Read more: <a href="https://windicss.org/guide/">https://windicss.org/guide/</a> <br></li><li>uuid</li><li>react-fast-marquee</li><li>@ola&#x2F;app<br><br>Ola app initialization and environment setup</li><li>@ola&#x2F;native<br><br>Connection to the native bridge of the flutter app</li><li>@ola&#x2F;utils<br><br>Includes utils to get lan, countdown</li><li>vconsole<br><br>H5 console that is similar to chrome dev tools<br><br>add ?console&#x3D;1 to enable it<br></li><li>@ola&#x2F;zh-scanner<br><br>Translation <br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pnpm run scanner<br></code></pre></td></tr></table></figure></li></ul><h3 id="FAQs-amp-Best-Practices"><a href="#FAQs-amp-Best-Practices" class="headerlink" title="FAQs &amp; Best Practices"></a>FAQs &amp; Best Practices</h3><ol><li>Why React-Query?</li></ol><ul><li>To simplify the process of dealing with API results and persisting the state<br></li><li>Compare both current project &amp; monopoly battle, and you will find out which one is easier<ul><li>Current example project: global useState + React Query</li><li>monopoly-battle project: Global store <br></li></ul></li><li>Read more @ the ‘Important dependencies’ section</li></ul><ol start="2"><li>How to use React-Query<br><br>Refer to the example: <a href="https://github.com/nguyenhieptech/react-query-ts">https://github.com/nguyenhieptech/react-query-ts</a><br><br>Do take note that we are using v4 instead of the v3 in the example<br></li><li>How to avoid React ‘Props Drilling’</li></ol><ul><li>No real answers. Suggestions as follows:<br>a. Use of global useState context AND&#x2F;OR context store AND&#x2F;OR React Query<ul><li>Current example project: Global useState + React Query</li><li>monopoly-battle project: Global context store <br><br>b. Component composition<figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [user, setState] = <span class="hljs-title function_">useState</span>(&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Steve&quot;</span> &#125;);<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Navbar</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">MainPage</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Content</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Message</span> <span class="hljs-attr">user</span>=<span class="hljs-string">&#123;user&#125;</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">Content</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">MainPage</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure>Read more @ <a href="https://blog.logrocket.com/solving-prop-drilling-react-apps/">https://blog.logrocket.com/solving-prop-drilling-react-apps/</a></li></ul></li></ul><ol start="4"><li>How to deal with translation that have variables at the middle?</li></ol><ul><li>Use a js&#x2F;ts file to export it and upload it to crowdin<br><br>Example file: &#x2F;veeka-pupular&#x2F;locale&#x2F;en.js<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> locale = &#123;<br>  <span class="hljs-attr">upgrade_rule_example_2</span>:<br>    <span class="hljs-string">&#x27;For example, if you become an “Influencer” on &lt;b&gt;1 January&lt;/b&gt; , which requires &lt;b&gt;5,000 points&lt;/b&gt; to upgrade to &lt;b&gt;“Starlet”&lt;/b&gt; and &lt;b&gt;600&lt;/b&gt; points to maintain:&#x27;</span>&#125;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> locale<br></code></pre></td></tr></table></figure></li></ul><ol start="5"><li>Import image assets dynamically<br><br>For background, vite uses esbuild for local&#x2F;development build &amp; rollup as bundler in production. <br><br>Although the dynamic import via variable does work in dev (esbuild), Rollup does not support dynamic import with variable string.<br><br>It only supports dynamic imports in pure string format.<br><br>Therefore, dynamic imports will looks like this:<br><br>Example file: &#x2F;src&#x2F;assets&#x2F;dynamic_import_assets.js<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> <span class="hljs-attr">dynamicImportAssets</span>: <span class="hljs-function">(<span class="hljs-params">language: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">any</span>&gt; = <span class="hljs-function">(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">  language: <span class="hljs-built_in">string</span></span></span><br><span class="hljs-params"><span class="hljs-function"></span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">switch</span> (language) &#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;en&#x27;</span>:<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./title/title_en.png&#x27;</span>)<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;zh_tw&#x27;</span>:<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./title/title_zh_tw.png&#x27;</span>)<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;id&#x27;</span>:<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./title/title_id.png&#x27;</span>)<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;pt&#x27;</span>:<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./title/title_pt.png&#x27;</span>)<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;th&#x27;</span>:<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./title/title_th.png&#x27;</span>)<br>    <span class="hljs-attr">default</span>:<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./title/title_zh_cn.png&#x27;</span>)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>A few items to take note when using dynamic imports:</li></ol><ul><li>Place the exported module ts file in the assets directory, as rollup will rename the image name and path during build time.<br></li><li>Use vite version 3 and above</li></ul><ol start="6"><li>Display modal<br>Modal.show (Example file: &#x2F;src&#x2F;components&#x2F;Modal&#x2F;modal.tsx)</li><li>Where to put Custom state provider<br>Not necessary on the root level, can be a level before the component<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">HomeProvider</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">MainPageRespProvider</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">BillboardRespProvider</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Home</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">BillboardRespProvider</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">MainPageRespProvider</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">HomeProvider</span><br></code></pre></td></tr></table></figure></li></ol><p>Then we can have a suspense loading for each component</p><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">Loading</span> /&gt;</span>&#125;&gt;</span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span></span></span><br><span class="hljs-tag"><span class="language-xml">    <span class="hljs-attr">className</span>=<span class="hljs-string">&#123;</span>`<span class="hljs-attr">fixed</span> <span class="hljs-attr">bottom-0</span> <span class="hljs-attr">w-full</span> <span class="hljs-attr">z-40</span> $&#123;</span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">DeviceInfo.isIphoneHigher</span> ? &#x27;<span class="hljs-attr">h-</span>[<span class="hljs-attr">174px</span>]&#x27; <span class="hljs-attr">:</span> &#x27;<span class="hljs-attr">h-</span>[<span class="hljs-attr">130px</span>]&#x27;</span></span><br><span class="hljs-tag"><span class="language-xml">    &#125;`&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">  &gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">BillboardSelfRanking</span> /&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h3 id="Common-issues-and-Ways-to-fix-it"><a href="#Common-issues-and-Ways-to-fix-it" class="headerlink" title="Common issues and Ways to fix it"></a>Common issues and Ways to fix it</h3><ol><li><p>Dependency registry resolution URL kept default to <a href="https://dev-page.iambanban.com/registry/">https://dev-page.iambanban.com/registry/</a></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">WARN GET https:<span class="hljs-regexp">//</span>dev-page.iambanban.com<span class="hljs-regexp">/registry/</span>@tanstack<span class="hljs-regexp">/react-query/</span>-/react-query-<span class="hljs-number">4.16</span>.<span class="hljs-number">1</span>.tgz error (ERR_PNPM_FETCH_404). Will retry <span class="hljs-keyword">in</span> <span class="hljs-number">10</span> seconds. <span class="hljs-number">2</span> retries left.<br>WARN GET https:<span class="hljs-regexp">//</span>dev-page.iambanban.com<span class="hljs-regexp">/registry/</span>@tanstack<span class="hljs-regexp">/query-core/</span>-/query-core-<span class="hljs-number">4.15</span>.<span class="hljs-number">1</span>.tgz error (ERR_PNPM_FETCH_404). Will retry <span class="hljs-keyword">in</span> <span class="hljs-number">10</span> seconds. <span class="hljs-number">2</span> retries left.<br>WARN GET https:<span class="hljs-regexp">//</span>dev-page.iambanban.com<span class="hljs-regexp">/registry/</span>@tanstack<span class="hljs-regexp">/match-sorter-utils/</span>-/match-sorter-utils-<span class="hljs-number">8.1</span>.<span class="hljs-number">1</span>.tgz error (ERR_PNPM_FETCH_404). Will retry <span class="hljs-keyword">in</span> <span class="hljs-number">10</span> seconds. <span class="hljs-number">2</span> retries left.<br>WARN GET https:<span class="hljs-regexp">//</span>dev-page.iambanban.com<span class="hljs-regexp">/registry/</span>@tanstack<span class="hljs-regexp">/react-query-devtools/</span>-/react-query-devtools-<span class="hljs-number">4.16</span>.<span class="hljs-number">1</span>.tgz error (ERR_PNPM_FETCH_404). Will retry <span class="hljs-keyword">in</span> <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>Reason: Production build command will set a default registry<br></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">-- PRODUCTION<span class="hljs-built_in"> SCRIPT</span><br><span class="hljs-built_in"></span>npm<span class="hljs-built_in"> config </span><span class="hljs-built_in">set</span> <span class="hljs-attribute">registry</span>=https://dev-page.iambanban.com/registry/ &amp;&amp;<br><span class="hljs-literal">yes</span> | npx kort build --selector <span class="hljs-variable">$selector</span> --webhook <span class="hljs-variable">$robot</span> --sender <span class="hljs-variable">$sender</span><br></code></pre></td></tr></table></figure><p>Solution: Force the dependency back to the original npm registry link<br></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ruby">registry=<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/registry.npm.taobao.org/</span><br><span class="hljs-variable">@ola</span><span class="hljs-symbol">:registry=https</span><span class="hljs-symbol">://dev-page</span>.iambanban.com/registry/<br></code></pre></td></tr></table></figure></li><li><p>Build failed but the log is showing that the dependency is downloading<br></p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs subunit"><span class="hljs-keyword">Progress: </span>resolved 1, reused 0, downloaded 0, added 0<br>Packages: <span class="hljs-string">+232</span><br>++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br>Packages are hard linked from the content-addressable store to the virtual store.<br> Content-addressable store is at: /root/workspace/.pnpm-store/v3<br> Virtual store is at:             node_modules/.pnpm<br><span class="hljs-keyword">Progress: </span>resolved 232, reused 0, downloaded 40, added 40<br><span class="hljs-keyword">Progress: </span>resolved 232, reused 0, downloaded 90, added 91<br><span class="hljs-keyword">Progress: </span>resolved 232, reused 0, downloaded 141, added 142<br><span class="hljs-keyword">Progress: </span>resolved 232, reused 0, downloaded 175, added 176<br><span class="hljs-keyword">Progress: </span>resolved 232, reused 0, downloaded 200, added 200<br><span class="hljs-keyword">Progress: </span>resolved 232, reused 0, downloaded 215, added 216<br><span class="hljs-keyword">Progress: </span>resolved 232, reused 0, downloaded 219, added 220<br><span class="hljs-keyword">Progress: </span>resolved 232, reused 0, downloaded 221, added 222<br></code></pre></td></tr></table></figure><p>Reason: Download timeout<br><br>Solution: Retrigger the dependency download process by changing a small part in the code and push to master<br></p></li></ol><h3 id="Future-project-structure-direction-One-project-rule-it-all-VS-Multiple-project-for-different-events"><a href="#Future-project-structure-direction-One-project-rule-it-all-VS-Multiple-project-for-different-events" class="headerlink" title="Future project structure direction - One project rule it all VS Multiple project for different events"></a>Future project structure direction - One project rule it all VS Multiple project for different events</h3><p>For new H5 event, create new project <br><br>For static H5 event, use veeka-static instead <br><br>Reason: Create all H5 event in a single monolith project does not reduce much server loads + storage and tends to have higher risks of affecting one another. </p><h3 id="What’s-next"><a href="#What’s-next" class="headerlink" title="What’s next:"></a>What’s next:</h3><ul><li>Protobuf with React (Currently only HTTPS API is supported)</li><li>Standardized loading page + refetching style</li></ul><h3 id="Update-15-Dec-2022"><a href="#Update-15-Dec-2022" class="headerlink" title="Update: 15 Dec 2022"></a>Update: 15 Dec 2022</h3><p>There is a new Flutter web H5 template created by 旋风 team. We will need to take a closer look into template and refine the state management, api caching and easy styling on that template.</p>]]></content>
    
    
    <categories>
      
      <category>practice</category>
      
      <category>technical_note</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Technical note</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Technical note</title>
    <link href="/tech-documentation/post/practice/technical_note/technical_note.html"/>
    <url>/tech-documentation/post/practice/technical_note/technical_note.html</url>
    
    <content type="html"><![CDATA[<h2 id="H5-Proto-to-Typescript"><a href="#H5-Proto-to-Typescript" class="headerlink" title="H5 Proto to Typescript"></a>H5 Proto to Typescript</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">protoc --plugin=./node_modules/.bin/protoc-gen-ts_proto --ts_proto_out=. ./src/service/recharge_agent.proto --ts_proto_opt=esModuleInterop=<span class="hljs-literal">true</span> --ts_proto_opt=<span class="hljs-built_in">env</span>=browser<br></code></pre></td></tr></table></figure><h2 id="Mobx-generation"><a href="#Mobx-generation" class="headerlink" title="Mobx generation"></a>Mobx generation</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">flutter pub run mobx_bin:gen -s banban_base/bbroom/lib/src/lucky_wheel/store/lucky_wheel_store.dart<br></code></pre></td></tr></table></figure><h2 id="Reload"><a href="#Reload" class="headerlink" title="Reload"></a>Reload</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl --location --request POST <span class="hljs-string">&#x27;http://vk.sgola.cc/go/Payment/InternalCreditAccount&#x27;</span> \<br>--header <span class="hljs-string">&#x27;Content-Type: application/json&#x27;</span> \<br>--data-raw <span class="hljs-string">&#x27;&#123;&quot;userID”:”112684”, type&quot;:&quot;gold_normal&quot;,&quot;operation&quot;:&quot;income&quot;,&quot;amount&quot;:&quot;99999&quot;,&quot;expiry&quot;:&quot;2023-10-01T00:00:00Z&quot;,&quot;trxType&quot;:&quot;internal_iap&quot;,&quot;trxID&quot;:&quot;1&quot;,&quot;trxUniqueKey&quot;:&quot;&quot;,&quot;subject&quot;:&quot;加钱&quot;,&quot;opDetail&quot;:&#123;&quot;scenario&quot;:&quot;test&quot;,&quot;extra&quot;:&#123;&#125;&#125;&#125;&#x27;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>practice</category>
      
      <category>technical_note</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Technical note</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>最佳情侣pk赛活动</title>
    <link href="/tech-documentation/post/h5_%E6%B4%BB%E5%8A%A8/H5_CP_PK_event.html"/>
    <url>/tech-documentation/post/h5_%E6%B4%BB%E5%8A%A8/H5_CP_PK_event.html</url>
    
    <content type="html"><![CDATA[<blockquote><p>最佳情侣 pk 赛活动接口文档，Ticket: <a href="https://github.com/olachat/veeka/issues/6199">https://github.com/olachat/veeka/issues/6199</a></p></blockquote><span id="more"></span><h2 id="最佳情侣-pk-赛活动"><a href="#最佳情侣-pk-赛活动" class="headerlink" title="最佳情侣 pk 赛活动"></a>最佳情侣 pk 赛活动</h2><h3 id="1-Get-Main-API"><a href="#1-Get-Main-API" class="headerlink" title="1. Get Main API"></a>1. Get Main API</h3><p>Desc: Main API before tab</p><p>URL: &#x2F;activity&#x2F;best_cp_pk_event&#x2F;BestCpPkEventInfo</p><p>Sample Response:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;event_period&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2023.1.21-2023.1.25&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;subtitle&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;累积爱心💗，争夺Veeka第一情侣&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;my_cp_content&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;left_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110298</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;boy&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;right_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110299</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;girl&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;is_cp_available&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 1 for available, 0 for not-available (display find cp btn)</span><br>    <span class="hljs-attr">&quot;cp_heart_point&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">30</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;cp_rank&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span> <span class="hljs-comment">//rank of the cp, start from 1</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;receive_heart_point_content&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;gift_tab_content&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;currency_exchange_rate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 1金豆 = ？爱心</span><br>      <span class="hljs-attr">&quot;prize_list&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-punctuation">&#123;</span><br>          <span class="hljs-attr">&quot;prize_type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;gift&quot;</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;钱兔似锦&quot;</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;gold_bean_price&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;100&quot;</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;gift&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;gift_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/.png&quot;</span><br>          <span class="hljs-punctuation">&#125;</span><br>        <span class="hljs-punctuation">&#125;</span><br>      <span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;cp_ring_tab_content&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;currency_exchange_rate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 1金豆 = ？爱心</span><br>      <span class="hljs-attr">&quot;prize_list&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-punctuation">&#123;</span><br>          <span class="hljs-attr">&quot;prize_type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;gift&quot;</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;钱兔似锦&quot;</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;gold_bean_price&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;100&quot;</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;gift&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;gift_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/.png&quot;</span><br>          <span class="hljs-punctuation">&#125;</span><br>        <span class="hljs-punctuation">&#125;</span><br>      <span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;friend_help_tab_content&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;currency_exchange_rate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 1助力值 = ？爱心</span><br>      <span class="hljs-attr">&quot;accumulated_heart_point&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">300</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;friend_list&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-punctuation">&#123;</span><br>          <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110298</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;boy&quot;</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>        <span class="hljs-punctuation">&#125;</span><br>      <span class="hljs-punctuation">]</span> <span class="hljs-comment">// top 5 friend who voted for you, if empty return []</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;rule_content&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;reward_list&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>      <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;rank&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;TOP 1&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-punctuation">[</span><br>        <span class="hljs-punctuation">&#123;</span><br>          <span class="hljs-attr">&quot;prize_type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;gift&quot;</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;钱兔似锦&quot;</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;gold_bean_price&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;100&quot;</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;desc&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;x2&quot;</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;gift&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;gift_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/.png&quot;</span><br>          <span class="hljs-punctuation">&#125;</span><br>        <span class="hljs-punctuation">&#125;</span><br>      <span class="hljs-punctuation">]</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">]</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="2-Submit-to-request-for-friend-vote"><a href="#2-Submit-to-request-for-friend-vote" class="headerlink" title="2. Submit to request for friend vote"></a>2. Submit to request for friend vote</h3><p>Desc: User tab on 获得助力 button -&gt; Open in app modal to pick friends to ask for help -&gt; Click submit -&gt; Submit this api with friends list to send 系统消息</p><p>URL: &#x2F;activity&#x2F;best_cp_pk_event&#x2F;RequestFriendVote</p><p>Sample Request:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;friend_uid_list&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;112805&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;112803&quot;</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="3-Get-Task-list"><a href="#3-Get-Task-list" class="headerlink" title="3. Get Task list"></a>3. Get Task list</h3><p>Desc: For display Love letter inbox, display all inbox</p><p>URL: &#x2F;activity&#x2F;best_cp_pk_event&#x2F;GetTaskList</p><p>Sample Response:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;error_message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">//没有信息不会放在这里</span><br>  <span class="hljs-attr">&quot;task_list&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;task_idx&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;任务 1&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;desc&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;情侣签到&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;current_progress_point&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;max_progress_point&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;cp_heart_point&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">30</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;btn_text&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;签到&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;UNCLAIMED&quot;</span> <span class="hljs-comment">//enum of &#123;UNCLAIMED, CLAIMED, UNAVAILABLE, GO_POST_MOMENT&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="4-Submit-Claim-Task-list"><a href="#4-Submit-Claim-Task-list" class="headerlink" title="4. Submit Claim Task list"></a>4. Submit Claim Task list</h3><p>Desc: For display Love letter inbox, display all inbox</p><p>URL: &#x2F;activity&#x2F;best_cp_pk_event&#x2F;ClaimTaskList</p><p>Sample Request:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;task_idx&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>Sample Response:<br>return success: true by default</p><h3 id="5-Get-Friend-Help-Vote-Billboard-Tab"><a href="#5-Get-Friend-Help-Vote-Billboard-Tab" class="headerlink" title="5. Get Friend Help Vote Billboard Tab"></a>5. Get Friend Help Vote Billboard Tab</h3><p>Desc: 助力好友 Billboard tab</p><p>URL: &#x2F;activity&#x2F;best_cp_pk_event&#x2F;FriendHelpVoteBillboardTab</p><p>Sample Request:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;friend_uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;112805&quot;</span> <span class="hljs-comment">// friend_uid is empty if no extra filtering is required (user is not enter from 系统消息)</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>Sample Response:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;not_rank_tips&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-comment">// if there isn&#x27;t any user in the rank return this, this will only display if the user rank list is empty, len(user_rank_list) == 0</span><br>    <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;活动还没开始&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;sub_title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;活动将在-月-日至-月-日&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vote_owned&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;300&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;max_vote_per_request&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;user_rank_list&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-comment">// if there is any user in the rank return the list of items, if not, return empty array, do not return null</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;cp_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">12</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;rank_idx&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;left_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110298</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;boy&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;right_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110299</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;girl&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;cp_vote_accumulated&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">52000</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="6-Submit-to-cast-vote-CP-Friends"><a href="#6-Submit-to-cast-vote-CP-Friends" class="headerlink" title="6. Submit to cast vote CP Friends"></a>6. Submit to cast vote CP Friends</h3><p>Desc: For display Love letter inbox, display all inbox</p><p>URL: &#x2F;activity&#x2F;best_cp_pk_event&#x2F;VoteCpFriend</p><p>Sample Request:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;cp_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;vote_amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="7-Best-CP-Billboard-Tab"><a href="#7-Best-CP-Billboard-Tab" class="headerlink" title="7. Best CP Billboard Tab"></a>7. Best CP Billboard Tab</h3><p>Desc: Billboard tab content</p><p>URL: &#x2F;activity&#x2F;best_cp_pk_event&#x2F;GetBestCPBillboardTab</p><p>Sample Response:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;not_rank_tips&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-comment">// if there isn&#x27;t any user in the rank return this, this will only display if the user rank list is empty, len(user_rank_list) == 0</span><br>    <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;活动还没开始&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;sub_title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;活动将在-月-日至-月-日&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;count_down&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;left_second&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10000</span> <span class="hljs-comment">// left countdown seconds in milliseconds</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;user_rank_list&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-comment">// if there is any user in the rank return the list of items, if not, return empty array, do not return null</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;rank_idx&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;left_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110298</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;boy&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;right_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110299</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;girl&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;cp_vote_accumulated&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">52000</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;my_cp_content&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;left_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110298</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;boy&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;right_user_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">110299</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;girl&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.png&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;is_cp_available&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 1 for available, 0 for not-available (display find cp btn)</span><br>    <span class="hljs-attr">&quot;cp_heart_point&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">30</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;cp_rank&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span> <span class="hljs-comment">//rank of the cp, start from 1</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="8-Heart-Transaction-History"><a href="#8-Heart-Transaction-History" class="headerlink" title="8. Heart Transaction History"></a>8. Heart Transaction History</h3><p>Desc: CP Heart Transaction History</p><p>URL: &#x2F;activity&#x2F;best_cp_pk_event&#x2F;GetHeartTransactionHistory</p><p>Sample Response:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;transaction_history&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;收获礼物&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;cp_heart_point&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="8-Friend-Help-Transaction-History"><a href="#8-Friend-Help-Transaction-History" class="headerlink" title="8. Friend Help Transaction History"></a>8. Friend Help Transaction History</h3><p>Desc: Friend Help Transaction History</p><p>URL: &#x2F;activity&#x2F;best_cp_pk_event&#x2F;GetFriendHelpTransactionHistory</p><p>Sample Response:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;transaction_history&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;收获礼物&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;cp_heart_point&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="IM-extra-fields-for-api-5-5-Get-Friend-Help-Vote-Billboard-Tab"><a href="#IM-extra-fields-for-api-5-5-Get-Friend-Help-Vote-Billboard-Tab" class="headerlink" title="IM extra fields for api 5 [5. Get Friend Help Vote Billboard Tab]"></a>IM extra fields for api 5 [5. Get Friend Help Vote Billboard Tab]</h3><ul><li>extra[‘url’] &#x3D; <EVENT_URL></li><li>extra[‘image_url’] &#x3D; <IMAGE_URL> by 大区</li><li>extra[‘type’] &#x3D; ‘event_invite’</li><li>extra[‘highlight’] &#x3D; <DESC> -&gt; desc text grey in color</li><li>message.content &#x3D; <EVENT_TITLE> by 大区 -&gt; will be bold in im message</li></ul><h3 id="Complicated-Flow"><a href="#Complicated-Flow" class="headerlink" title="Complicated Flow"></a>Complicated Flow</h3><h4 id="1-For-request-vote-from-friends"><a href="#1-For-request-vote-from-friends" class="headerlink" title="1. For request vote from friends"></a>1. For request vote from friends</h4><p>Click on the 助力好友 btn on the third tab -&gt; mobile display the bottom sheet to select friends -&gt; click submit -&gt;<br>Server side send IM message using the user account to the selected friends with clickable link <EVENT_LINK>?friendUid&#x3D;”<FRIEND_UID>“ -&gt;<br>Open the event page and auto scroll to the 助力好友 billboard section -&gt;<br>the api 5 [5. Get Friend Help Vote Billboard Tab] should provide the friendUid as param, and the return array should have the selected friend CP as first item</p><h4 id="2-Task-Center"><a href="#2-Task-Center" class="headerlink" title="2. Task Center"></a>2. Task Center</h4><p>Task 1 签到任务 only have UNCLAIMED | CLAIMED status<br>Task 2 will have UNCLAIMED | CLAIMED | GO_POST_MOMENT<br>Task 3 will have UNCLAIMED | CLAIMED </p>]]></content>
    
    
    <categories>
      
      <category>h5_活动</category>
      
    </categories>
    
    
    <tags>
      
      <tag>H5</tag>
      
      <tag>接口文档</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ee-front/native</title>
    <link href="/tech-documentation/post/h5_%E6%B4%BB%E5%8A%A8/ola_native.html"/>
    <url>/tech-documentation/post/h5_%E6%B4%BB%E5%8A%A8/ola_native.html</url>
    
    <content type="html"><![CDATA[<h1 id="ee-front-x2F-native"><a href="#ee-front-x2F-native" class="headerlink" title="@ee-front&#x2F;native"></a>@ee-front&#x2F;native</h1><p>ola平台下各app提供的native接口</p><p>如果你在业务中碰到了新的需求, 增加了新的native接口, 请在此包中补充</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserInfo</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-comment">// 获取用户信息</span><br>  <span class="hljs-keyword">return</span> callAppFunc&lt;&#123;<br>    lan?: <span class="hljs-built_in">string</span><br>    <span class="hljs-attr">server_env</span>: <span class="hljs-built_in">string</span><br>    <span class="hljs-attr">token</span>: <span class="hljs-built_in">string</span><br>    <span class="hljs-attr">uid</span>: <span class="hljs-built_in">number</span><br>    <span class="hljs-attr">package</span>: <span class="hljs-built_in">string</span><br>    <span class="hljs-attr">icon</span>: <span class="hljs-built_in">string</span><br>  &#125;&gt;(<span class="hljs-string">&#x27;getUserInfo&#x27;</span>)<br>&#125;<br><span class="hljs-comment">// 跳转客户端登录</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">login</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;login&#x27;</span>)<br>&#125;<br><span class="hljs-comment">// 进入指定房间</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">openRoom</span>(<span class="hljs-params">rid: <span class="hljs-built_in">number</span> | <span class="hljs-built_in">string</span></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;openRoom&#x27;</span>, &#123; <span class="hljs-attr">rid</span>: <span class="hljs-title class_">Number</span>(rid) &#125;)<br>&#125;<br><span class="hljs-comment">// 进入指定大神的订单邀约界面</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">openOrderScreen</span>(<span class="hljs-params">toUid: <span class="hljs-built_in">number</span></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;openOrderScreen&#x27;</span>, &#123; <span class="hljs-attr">uid</span>: toUid &#125;)<br>&#125;<br><span class="hljs-comment">// 设置页面标题</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">setTitle</span>(<span class="hljs-params">title: <span class="hljs-built_in">string</span></span>) &#123;<br>  <span class="hljs-variable language_">window</span>.<span class="hljs-property">document</span>.<span class="hljs-property">title</span> = title<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;setTitle&#x27;</span>, &#123; title &#125;)<br>&#125;<br><span class="hljs-comment">// 保存图片</span><br><span class="hljs-comment">// url --url为网路图片地址</span><br><span class="hljs-comment">// content  ---base64内容</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">saveImage</span>(<span class="hljs-params"><span class="hljs-keyword">type</span>: <span class="hljs-string">&#x27;url&#x27;</span> | <span class="hljs-string">&#x27;content&#x27;</span>, data: <span class="hljs-built_in">string</span></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;saveImage&#x27;</span>, &#123; [<span class="hljs-keyword">type</span>]: data &#125;)<br>&#125;<br><span class="hljs-comment">// 分享图片 canvas绘制的图片 分享到QQ微信等</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">shareByImage</span>(<span class="hljs-params"><span class="hljs-keyword">type</span>: <span class="hljs-built_in">string</span>, imgUrl: <span class="hljs-built_in">string</span></span>) &#123;<br>  <span class="hljs-keyword">const</span> tpMap = &#123;<br>    <span class="hljs-attr">wechat</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">moment</span>: <span class="hljs-number">2</span>,<br>    <span class="hljs-attr">qq</span>: <span class="hljs-number">3</span>,<br>    <span class="hljs-attr">qzone</span>: <span class="hljs-number">4</span>,<br>    <span class="hljs-attr">face</span>: <span class="hljs-number">5</span><br>  &#125;<br>  <span class="hljs-keyword">const</span> tp = tpMap[<span class="hljs-keyword">type</span>]<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;shareDirect&#x27;</span>, &#123; <span class="hljs-keyword">type</span>, tp, imgUrl &#125;)<br>&#125;<br><span class="hljs-comment">// 签到/补签</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">checkin</span>(<span class="hljs-params">params: &#123; [key: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">any</span> &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;checkin&#x27;</span>, params)<br>&#125;<br><span class="hljs-comment">// 领取奖励</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getAward</span>(<span class="hljs-params">params: &#123; [key: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">any</span> &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;getAward&#x27;</span>, params)<br>&#125;<br><span class="hljs-comment">// 客户端重新回到H5</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">onReturnToWeb</span>(<span class="hljs-params">callback: () =&gt; <span class="hljs-built_in">void</span></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">listenAppMethod</span>(<span class="hljs-string">&#x27;onReturnToWeb&#x27;</span>, callback)<br>&#125;<br><br><span class="hljs-comment">// 分享到微信</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">shareWechat</span>(<span class="hljs-params">tp: <span class="hljs-built_in">number</span></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;shareDirect&#x27;</span>, &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;wechat&#x27;</span>, tp &#125;)<br>&#125;<br><span class="hljs-comment">// 分享到朋友圈</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">shareWechatMoment</span>(<span class="hljs-params">tp: <span class="hljs-built_in">number</span></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;shareDirect&#x27;</span>, &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;moment&#x27;</span>, tp &#125;)<br>&#125;<br><span class="hljs-comment">// 分享到QQ</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">shareQQ</span>(<span class="hljs-params">tp: <span class="hljs-built_in">number</span></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;shareDirect&#x27;</span>, &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;qq&#x27;</span>, tp &#125;)<br>&#125;<br><span class="hljs-comment">// 分享到QQ空间</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">shareQZone</span>(<span class="hljs-params">tp: <span class="hljs-built_in">number</span></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;shareDirect&#x27;</span>, &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;qzone&#x27;</span>, tp &#125;)<br>&#125;<br><span class="hljs-comment">// 分享到facebook</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">shareFacebook</span>(<span class="hljs-params">tp: <span class="hljs-built_in">number</span></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;shareDirect&#x27;</span>, &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;facebook&#x27;</span>, tp &#125;)<br>&#125;<br><span class="hljs-comment">// 分享到twitter</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">shareTwitter</span>(<span class="hljs-params">tp: <span class="hljs-built_in">number</span></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;shareDirect&#x27;</span>, &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;twitter&#x27;</span>, tp &#125;)<br>&#125;<br><span class="hljs-comment">// 分享到line</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">shareLine</span>(<span class="hljs-params">tp: <span class="hljs-built_in">number</span></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;shareDirect&#x27;</span>, &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;line&#x27;</span>, tp &#125;)<br>&#125;<br><span class="hljs-comment">// 跳转到我的字符页</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">showVipMall</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;showVipMall&#x27;</span>)<br>&#125;<br><span class="hljs-comment">// 跳转到我的字符页榜单</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">showRank</span>(<span class="hljs-params">param: &#123; [key: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">any</span> &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;showRank&#x27;</span>, param)<br>&#125;<br><span class="hljs-comment">// 跳转到web页</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">showScreen</span>(<span class="hljs-params">url: <span class="hljs-built_in">string</span></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;showCommonWebScreen&#x27;</span>, &#123; url &#125;)<br>&#125;<br><span class="hljs-comment">// 跳转到个人主页</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">showImageScreen</span>(<span class="hljs-params">uid: <span class="hljs-built_in">number</span> | <span class="hljs-built_in">string</span></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;showImageScreen&#x27;</span>, &#123; <span class="hljs-attr">uid</span>: <span class="hljs-title class_">Number</span>(uid) &#125;)<br>&#125;<br><span class="hljs-comment">// 进入附近</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">showNearby</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;showNearby&#x27;</span>)<br>&#125;<br><span class="hljs-comment">// 进入粉丝列表</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">showFansList</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;showFansList&#x27;</span>)<br>&#125;<br><span class="hljs-comment">// 进入首页</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">showHomePage</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;showHomePage&#x27;</span>)<br>&#125;<br><span class="hljs-comment">// 进入发现-娱乐房列表</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">showJoyRoom</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;showJoyRoom&#x27;</span>)<br>&#125;<br><span class="hljs-comment">// 进入余额充值</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">showChargeBalance</span>(<span class="hljs-params">refer?: <span class="hljs-built_in">string</span></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;showChargeBalance&#x27;</span>, refer ? &#123; refer &#125; : <span class="hljs-literal">undefined</span>)<br>&#125;<br><span class="hljs-comment">// 进入身份验证</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">showChargeOrBindPhoneNumber</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;showChargeOrBindPhoneNumber&#x27;</span>)<br>&#125;<br><span class="hljs-comment">// 进入选择你要创建的类型页面</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">showCreateRoom</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;showCreateRoom&#x27;</span>)<br>&#125;<br><span class="hljs-comment">// 随机进入画猜、卧底、狼人杀房间</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">showSocialGame</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;showSocialGame&#x27;</span>)<br>&#125;<br><span class="hljs-comment">// 随机进入画猜、卧底、狼人杀、娱乐房</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">showSocialGameAndJoyRoom</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;showSocialGameAndJoyRoom&#x27;</span>)<br>&#125;<br><span class="hljs-comment">// 进入朋友圈</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">showMoment</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;showMoment&#x27;</span>)<br>&#125;<br><span class="hljs-comment">// 进入与指定好友聊天界面</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">showPrivateChat</span>(<span class="hljs-params">params: &#123; [key: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">any</span> &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;showPrivateChat&#x27;</span>, params)<br>&#125;<br><span class="hljs-comment">// 身份验证剧本杀</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">idAuth</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;idAuth&#x27;</span>)<br>&#125;<br><span class="hljs-comment">// 剧本杀首页</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">juben</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;juben&#x27;</span>)<br>&#125;<br><span class="hljs-comment">// 小游戏 游戏id</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">littleGame</span>(<span class="hljs-params">params: &#123; [key: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">any</span> &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;littleGame&#x27;</span>, params)<br>&#125;<br><span class="hljs-comment">// 消息Tab关注列表</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">showFollowList</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;showFollowList&#x27;</span>)<br>&#125;<br><span class="hljs-comment">// 发现页</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">showDiscoveryPage</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;showDiscoveryPage&#x27;</span>)<br>&#125;<br><span class="hljs-comment">// 剧本库列表</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">jubenList</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;jubenList&#x27;</span>)<br>&#125;<br><span class="hljs-comment">// 跳转话题页</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">openTopicDetail</span>(<span class="hljs-params">topicId: <span class="hljs-built_in">number</span></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;openTopicDetail&#x27;</span>, &#123; topicId &#125;)<br>&#125;<br><span class="hljs-comment">// 获取系统信息</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getSystemInfoSync</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;getSystemInfoSync&#x27;</span>)<br>&#125;<br><br><span class="hljs-comment">// 返回</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">navigateBack</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;navigateBack&#x27;</span>)<br>&#125;<br><br><span class="hljs-comment">// 跳转到首页某个tab</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">showHomePageWithTab</span>(<span class="hljs-params">tab: <span class="hljs-built_in">string</span></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;showHomePageWithTab&#x27;</span>, &#123; <span class="hljs-attr">tabType</span>: tab &#125;)<br>&#125;<br><span class="hljs-comment">// 跳转到背包</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">openMyBag</span>(<span class="hljs-params">params: &#123; [key: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">any</span> &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;openMyBag&#x27;</span>, params)<br>&#125;<br><br><span class="hljs-comment">// 打开指定页面</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">schema</span>(<span class="hljs-params">schemaUrl: <span class="hljs-built_in">string</span></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">callAppFunc</span>(<span class="hljs-string">&#x27;schema&#x27;</span>, &#123; <span class="hljs-attr">schema_url</span>: schemaUrl &#125;)<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>h5_活动</category>
      
    </categories>
    
    
    <tags>
      
      <tag>H5</tag>
      
      <tag>接口文档</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>H5 Useful tips</title>
    <link href="/tech-documentation/post/h5_%E6%B4%BB%E5%8A%A8/H5_Useful_tips.html"/>
    <url>/tech-documentation/post/h5_%E6%B4%BB%E5%8A%A8/H5_Useful_tips.html</url>
    
    <content type="html"><![CDATA[<blockquote><p>H5 Useful tips</p></blockquote><h3 id="Draw-custom-shapes-with-css"><a href="#Draw-custom-shapes-with-css" class="headerlink" title="Draw custom shapes with css"></a>Draw custom shapes with css</h3><p><a href="https://bennettfeely.com/clippy/">https://bennettfeely.com/clippy/</a></p><h3 id="Navigation-List"><a href="#Navigation-List" class="headerlink" title="Navigation List"></a>Navigation List</h3><p><a href="https://www.figma.com/file/f6JxRIdSJ9YxWdsHrQC6lg/H5-BUTTON?node-id=0:1&t=216kIMNYg4jWsGzO-1">https://www.figma.com/file/f6JxRIdSJ9YxWdsHrQC6lg/H5-BUTTON?node-id=0%3A1&amp;t=216kIMNYg4jWsGzO-1</a></p><h3 id="Proto-Generation-for-H5"><a href="#Proto-Generation-for-H5" class="headerlink" title="Proto Generation for H5"></a>Proto Generation for H5</h3><p>protoc –plugin&#x3D;.&#x2F;node_modules&#x2F;.bin&#x2F;protoc-gen-ts_proto –ts_proto_out&#x3D;. .&#x2F;src&#x2F;service&#x2F;<proto_name>.proto –ts_proto_opt&#x3D;esModuleInterop&#x3D;true –ts_proto_opt&#x3D;env&#x3D;browser</p>]]></content>
    
    
    <categories>
      
      <category>h5_活动</category>
      
    </categories>
    
    
    <tags>
      
      <tag>H5</tag>
      
      <tag>Tips</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Auth failed issue upon login</title>
    <link href="/tech-documentation/post/veeka_mobile/login/login.html"/>
    <url>/tech-documentation/post/veeka_mobile/login/login.html</url>
    
    <content type="html"><![CDATA[<blockquote><p>Existing issue with Auth failed when switching dev and prod environment when user is logged in</p></blockquote><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>If user change environment while logged in, and click restart to take effect button in developer options, it will show ‘Auth failed’ error message on the next app start. This happens because of the globalProviders was set on the application.dart level instead on the after login part of the code.</p><ul><li><p>Line 151, application.dart</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">globalProviders</span><span class="hljs-selector-class">.addAll</span>([<br>      <span class="hljs-built_in">ChangeNotifierProvider</span>(<span class="hljs-attribute">create</span>: (_) =&gt; <span class="hljs-built_in">UserModel</span>(), <span class="hljs-attribute">lazy</span>: false),<br>      <span class="hljs-built_in">ChangeNotifierProvider</span>(<span class="hljs-attribute">create</span>: (_) =&gt; <span class="hljs-built_in">MomentModel</span>(), <span class="hljs-attribute">lazy</span>: false),<br>      <span class="hljs-built_in">ChangeNotifierProvider</span>(<span class="hljs-attribute">create</span>: (_) =&gt; <span class="hljs-built_in">ProfilePayload</span>(), <span class="hljs-attribute">lazy</span>: false),<br>      <span class="hljs-built_in">ChangeNotifierProvider</span>(<span class="hljs-attribute">create</span>: (_) =&gt; <span class="hljs-built_in">GiftMediaModel</span>(), <span class="hljs-attribute">lazy</span>: false),<br>      <span class="hljs-built_in">ChangeNotifierProvider</span>(<span class="hljs-attribute">create</span>: (_) =&gt; <span class="hljs-built_in">ThemeProvider</span>(), <span class="hljs-attribute">lazy</span>: false),<br>      <span class="hljs-built_in">ChangeNotifierProvider</span>(<span class="hljs-attribute">create</span>: (_) =&gt; <span class="hljs-built_in">MomentVideoProvider</span>(), <span class="hljs-attribute">lazy</span>: false),<br>      <span class="hljs-built_in">ChangeNotifierProvider</span>(<span class="hljs-attribute">create</span>: (_) =&gt; <span class="hljs-built_in">PersonalInfoProvider</span>(), <span class="hljs-attribute">lazy</span>: false),<br>      <span class="hljs-built_in">ChangeNotifierProvider</span>(<span class="hljs-attribute">create</span>: (_) =&gt; <span class="hljs-built_in">RechargePackageProvider</span>(), <span class="hljs-attribute">lazy</span>: false),<br>      <span class="hljs-built_in">ChangeNotifierProvider</span>(<span class="hljs-attribute">create</span>: (_) =&gt; <span class="hljs-built_in">GiftDecorateProvider</span>(), <span class="hljs-attribute">lazy</span>: false),<br>      <span class="hljs-built_in">ChangeNotifierProvider</span>(<span class="hljs-attribute">create</span>: (_) =&gt; <span class="hljs-built_in">MomentPostGuideProvider</span>(), <span class="hljs-attribute">lazy</span>: false),<br>      if (Constant.isDevMode) <span class="hljs-built_in">ChangeNotifierProvider</span>(<span class="hljs-attribute">create</span>: (_) =&gt; hotupdater, <span class="hljs-attribute">lazy</span>: false),<br>    ]);<br></code></pre></td></tr></table></figure></li><li><p>This part of code will triggered actively and will trigger the api calls to get information such as taskCenterShowRedDot</p></li><li><p>Snippet from ProfilePayload</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-constructor">ProfilePayload()</span> &#123;<br>    eventCenter.add<span class="hljs-constructor">Listener(System.EventLogin, <span class="hljs-params">_onLogin</span>)</span>;<br>    eventCenter.add<span class="hljs-constructor">Listener(&#x27;TaskCenter.<span class="hljs-params">noRedDot</span>&#x27;, <span class="hljs-params">_removeTaskDot</span>)</span>;<br>    eventCenter.add<span class="hljs-constructor">Listener(EventConstant.TaskCenterClaimableChange, <span class="hljs-params">_taskCenterClaimableChange</span>)</span>;<br><br>    reload<span class="hljs-literal">()</span>;<br>    load<span class="hljs-constructor">MomentsInfo()</span>;<br>    load<span class="hljs-constructor">MomentUnreadMsg()</span>;<br>    load<span class="hljs-constructor">VipMallRedPoint()</span>;<br>    load<span class="hljs-constructor">GiftWallPoint()</span>;<br>    load<span class="hljs-constructor">MentorShipRedPoint()</span>;<br>    load<span class="hljs-constructor">PopularityRedPoint()</span>;<br>    load<span class="hljs-constructor">VipRedPoint()</span>;<br>    load<span class="hljs-constructor">GoldBeanRedPoint()</span>;<br>    <span class="hljs-keyword">function</span><span class="hljs-constructor">CenterHasRedDot()</span>;<br>    task<span class="hljs-constructor">CenterShowRedDot()</span>;<br>    load<span class="hljs-constructor">InvitePrizeRedDot()</span>;<br><br>    _momentRedPointTimer =<br>        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Timer</span>.</span></span>periodic(<span class="hljs-constructor">Duration(<span class="hljs-params">seconds</span>: 60)</span>,<span class="hljs-function"> (<span class="hljs-params">timer</span>) =&gt;</span> load<span class="hljs-constructor">MomentsInfo()</span>);<br>    _momentUnReadMsgTimer =<br>        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Timer</span>.</span></span>periodic(<span class="hljs-constructor">Duration(<span class="hljs-params">seconds</span>: 90)</span>,<span class="hljs-function"> (<span class="hljs-params">timer</span>) =&gt;</span> load<span class="hljs-constructor">MomentUnreadMsg()</span>);<br>  &#125;<br></code></pre></td></tr></table></figure></li><li><p>You might think that adding a check on the session.isLogined() might solve the issue, but actually it will not. This part of code will be called upon app startup which is before it checks that the app session is valid or not. Calling the Session here will only get the previous session status, which in turns causing the session.isLogined() to be true.</p></li></ul><h2 id="Possible-fix-for-this-issue"><a href="#Possible-fix-for-this-issue" class="headerlink" title="Possible fix for this issue"></a>Possible fix for this issue</h2><ol><li>Destroy the session upon clicking the ‘重启生效’, but it creates extra steps for developer and QA during testing (Need to relogin if we change environment)</li></ol><h2 id="Why-we-opt-to-not-fixing-this-issue"><a href="#Why-we-opt-to-not-fixing-this-issue" class="headerlink" title="Why we opt to not fixing this issue"></a>Why we opt to not fixing this issue</h2><ol><li>Currently it only affects dev environment and it is not a fatal issue (Online users does not have the rights to switch environment)</li></ol>]]></content>
    
    
    <categories>
      
      <category>veeka_mobile</category>
      
      <category>login</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Authentication</tag>
      
      <tag>Login</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Agora &amp; BBRTC Debug steps</title>
    <link href="/tech-documentation/post/veeka_mobile/rtc/rtc.html"/>
    <url>/tech-documentation/post/veeka_mobile/rtc/rtc.html</url>
    
    <content type="html"><![CDATA[<blockquote><p>Steps to debug agora and bbrtc</p></blockquote><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>Agora is a paid service of video, voice and live interactive streaming, whereas bbrtc is developed by ola team.<br>Agora is used in video room whereas bbrtc is used in other room<br>However, due to the network connection issue in some region including Taiwan, Agora is still the default rtc engine to use in Veeka App.</p><h2 id="How-to-determine-if-we-have-agora-x2F-bbrtc-issue"><a href="#How-to-determine-if-we-have-agora-x2F-bbrtc-issue" class="headerlink" title="How to determine if we have agora&#x2F;bbrtc issue"></a>How to determine if we have agora&#x2F;bbrtc issue</h2><p>Check if the following items are having issues:</p><ul><li>Listen music in room</li><li>Video call and see if other can view the video</li></ul><h2 id="Possible-issue"><a href="#Possible-issue" class="headerlink" title="Possible issue"></a>Possible issue</h2><ol><li>Agora&#x2F;BBRTC app id expired issue</li></ol><ul><li>Currently the app id for both rtc engine is set by Veeka mobile app, although there is api and remote config to replace these app id, none of them are used currently. The developer_options.dart should be the only source of truth when it comes to the app id configuration.</li></ul><h2 id="How-to-solve"><a href="#How-to-solve" class="headerlink" title="How to solve"></a>How to solve</h2><ol><li>Change to different environment and check if the issue persist</li><li>If it does not exist on the other environment, it is high likely that the app id is expired, find X教授 if it is related to Agora, bbrtc team if it is related to bbrtc</li></ol>]]></content>
    
    
    <categories>
      
      <category>veeka_mobile</category>
      
      <category>rtc</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Agora</tag>
      
      <tag>BBRTC</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>AgileKit</title>
    <link href="/tech-documentation/post/agilekit/agilekit_intro_usage.html"/>
    <url>/tech-documentation/post/agilekit/agilekit_intro_usage.html</url>
    
    <content type="html"><![CDATA[<blockquote><p>AgileKit Docs and usage，Ticket: <a href="https://github.com/olachat/agilekit">https://github.com/olachat/agilekit</a></p></blockquote><span id="more"></span><h1 id="agilekit"><a href="#agilekit" class="headerlink" title="agilekit"></a>agilekit</h1><p>Go project to organize and process github issues.</p><h2 id="Prerequisite"><a href="#Prerequisite" class="headerlink" title="Prerequisite"></a>Prerequisite</h2><ul><li>go version 1.19</li></ul><h2 id="To-generate-CSV-file"><a href="#To-generate-CSV-file" class="headerlink" title="To generate CSV file"></a>To generate CSV file</h2><ol><li>Update the conf.toml<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml">[<span class="hljs-string">app</span>]<br><span class="hljs-string">port=5555</span><br><span class="hljs-string">GithubToken=&quot;YOUR_GITHUB_TOKEN&quot;</span><br><span class="hljs-string">OrgName=&quot;olachat&quot;</span><br><span class="hljs-string">ProjectNumber=12380446</span><br><span class="hljs-string">TeamName=&quot;veeka&quot;</span><br><span class="hljs-string">GithubAPIUrl=&quot;https://api.github.com/&quot;</span><br></code></pre></td></tr></table></figure></li><li>Generate CSV Files<br>a. Generate for all sprints<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make Makefile -C /Users/ola_friend/Documents/REPO/agilekit okr-all <br></code></pre></td></tr></table></figure></li></ol><p>b. Generate for current sprint only</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make Makefile -C /Users/ola_friend/Documents/REPO/agilekit okr-current <br></code></pre></td></tr></table></figure><h2 id="To-Archive-old-issues"><a href="#To-Archive-old-issues" class="headerlink" title="To Archive old issues"></a>To Archive old issues</h2><ol><li><p>Dry run to view the closable issues available</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make Makefile -C /Users/ola_friend/Documents/REPO/agilekit archive <br></code></pre></td></tr></table></figure></li><li><p>Execute close command to all closable issues <br>(WARNING: Run this cmd only when you know what you are doing)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make Makefile -C /Users/ola_friend/Documents/REPO/agilekit archive-exec<br></code></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    <categories>
      
      <category>agilekit</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AgileKit</tag>
      
      <tag>Github Project</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Ramadan 活动</title>
    <link href="/tech-documentation/post/h5_%E6%B4%BB%E5%8A%A8/Ramadan_event.html"/>
    <url>/tech-documentation/post/h5_%E6%B4%BB%E5%8A%A8/Ramadan_event.html</url>
    
    <content type="html"><![CDATA[<blockquote><p>Ramadan 活动接口文档，Ticket: <a href="https://github.com/olachat/veeka/issues/6465">https://github.com/olachat/veeka/issues/6465</a></p></blockquote><span id="more"></span><h2 id="Ticket-Information"><a href="#Ticket-Information" class="headerlink" title="Ticket Information"></a>Ticket Information</h2><p>BRD: Pending<br>Modao: <a href="https://modao.cc/app/NSgmTIeirraexeRRE0g2Ki">https://modao.cc/app/NSgmTIeirraexeRRE0g2Ki</a><br>Design: <a href="https://lanhuapp.com/link/#/invite?sid=lx0QPhKb">https://lanhuapp.com/link/#/invite?sid=lx0QPhKb</a><br>Animation Requirement: <a href="https://docs.google.com/document/d/1X6ViGg0xngI2VCbZFB8tUDPAwUtkiVOX5tfcLwgyi9g/edit">https://docs.google.com/document/d/1X6ViGg0xngI2VCbZFB8tUDPAwUtkiVOX5tfcLwgyi9g/edit</a><br>Deadline - 18 April 2023</p><p>To-do:</p><ul><li>发送卡片邀请和接收卡片邀请的页面交互得调整</li><li>免费抽奖和 1 次抽奖的按钮做在一块</li><li>集成卡默认置灰</li><li>动效资源</li><li>4 月 18 日上线</li></ul><p>Developer todo:</p><ul><li><input disabled="" type="checkbox"> POC on react VAP implementation, Study how vap works in room and try to implement in H5 -&gt; @linboyuan-ola</li><li><input disabled="" type="checkbox"> Project setup, API specs, API caching &amp; definition and Theming of the project -&gt; @dylansalim-ola</li><li><input disabled="" type="checkbox"> H5 Frontend -&gt; Boyuan &amp; Dylan (To be split, Boyuan - VAP focus)</li><li><input disabled="" type="checkbox"> Backend -&gt; @ziyu-ola</li></ul><p>Note: Boyuan will be on leave for a week during this activity development period, Dylan will help to cover the remaining parts</p><h2 id="最佳情侣-pk-赛活动"><a href="#最佳情侣-pk-赛活动" class="headerlink" title="最佳情侣 pk 赛活动"></a>最佳情侣 pk 赛活动</h2><h3 id="1-Get-Main-API"><a href="#1-Get-Main-API" class="headerlink" title="1. Get Main API"></a>1. Get Main API</h3><p>Desc: Main API</p><p>URL: &#x2F;activity&#x2F;RamadanEvent&#x2F;GetEventInfo</p><p>Sample Response:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;event_period&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2023.1.21-2023.1.25&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;marquee&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;XXX got it XXX&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;XXX got it XXX&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;jackpot_prize_list&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;prize_type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;gift&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;钱兔似锦&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;gold_bean_price&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;100&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;gift&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;gift_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/.png&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="2-Get-Jackpot-Data"><a href="#2-Get-Jackpot-Data" class="headerlink" title="2. Get Jackpot Data"></a>2. Get Jackpot Data</h3><p>Desc: Jackpot data and potential update the card stack data</p><p>URL: &#x2F;activity&#x2F;RamadanEvent&#x2F;GetJackpotData</p><p>Sample Response:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;free_lottery_available&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;wallet_amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">33333</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;jackpot&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">32636</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;desc&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Currently, there are 2000 cards combined by 500 lucky people&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;card_stack_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;synthesized_amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;synthesizable&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;card_1&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;card_2&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;card_3&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;card_4&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;card_5&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span> <span class="hljs-comment">// same as API 4</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="3-Submit-draw-prize-request"><a href="#3-Submit-draw-prize-request" class="headerlink" title="3. Submit draw prize request"></a>3. Submit draw prize request</h3><p>Desc: Free lottery for Ramadan&#x2F;Draw a prize once&#x2F;Ten sweeptakes, return data from API 2 if success</p><p>URL: &#x2F;activity&#x2F;RamadanEvent&#x2F;RequestDrawPrize</p><p>Sample Request:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;draw_type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;FREE&quot;</span> <span class="hljs-comment">// Types -&gt; &quot;FREE&quot;, &quot;ONCE&quot;, &quot;TEN&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>Sample Response:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;jackpot_data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;free_lottery_available&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;wallet_amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">33333</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;jackpot&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">32636</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;desc&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Currently, there are 2000 cards combined by 500 lucky people&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;card_stack_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;synthesized_amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;synthesizable&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;card_1&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;card_2&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;card_3&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;card_4&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;card_5&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// SAME AS API 2</span><br>  <span class="hljs-attr">&quot;reward&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;prize_type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;gift&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;钱兔似锦&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;gold_bean_price&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;100&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;gift&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;gift_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/.png&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="4-Get-Card-Stack-Info"><a href="#4-Get-Card-Stack-Info" class="headerlink" title="4. Get Card Stack Info"></a>4. Get Card Stack Info</h3><p>Desc: For display Love letter inbox, display all inbox</p><p>URL: &#x2F;activity&#x2F;RamadanEvent&#x2F;GetCardStackInfo</p><p>Sample Response:</p><figure class="highlight json"><figcaption><span>lines</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;card_stack_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;synthesized_amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;synthesizable&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;card_1&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;card_2&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;card_3&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;card_4&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;card_5&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;amount&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="5-Submit-Request-for-One-Bond-Synthesis"><a href="#5-Submit-Request-for-One-Bond-Synthesis" class="headerlink" title="5. Submit Request for One Bond Synthesis"></a>5. Submit Request for One Bond Synthesis</h3><p>Desc: One Bond Synthesis button</p><p>URL: &#x2F;activity&#x2F;best_cp_pk_event&#x2F;FriendHelpVoteBillboardTab</p>]]></content>
    
    
    <categories>
      
      <category>h5_活动</category>
      
    </categories>
    
    
    <tags>
      
      <tag>H5</tag>
      
      <tag>接口文档</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
